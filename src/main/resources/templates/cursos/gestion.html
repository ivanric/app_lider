<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	>
<head>
<title>SOCIOS</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<link rel="icon" href="../img/LOGOLIDER.png" type="image/png">
<meta name="author" content="">
<style>
.selected {
	background-color: #B0BED9;
}

 
.ocultar {
    display: none;
}
 
.mostrar {
    display: block;
}

td {
    vertical-align: middle !important;
}
.input_cata{
	background: #f9f9f9;
    width: 100%;
    border: none;
    height: 2em;
    padding: 0 0.5rem;
    outline: none;
}
.label_cata{
	background: #fffbdd;
    width: 35%; 
    border: none;
    height: 2rem;
    padding: 0 0.5rem;
    align-items: center;
    display: flex;
    font-weight: 900;
}
.input_group_cata{
	display: flex;
}

.select2-results{
	position:relative;
	z-index: 9000;
}
.hide-remove {
    display: none !important;
}
.kv-preview-data img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover;
}
.btn_select_all{
	background: #08b8b5;
    color: white;
    font-size: 11px;
    border: 0.5px;
    padding: 2px 10px;
    border-radius: 3px;
}
.btn_select_all_global{
	background: #d85f03;
    color: white;
    font-size: 11px;
    border: 0.5px;
    padding: 2px 10px;
    border-radius: 3px;
}
</style>
</head>
<body >
	<form name="formulario" role="form" id="formulario" method="post"
		enctype="multipart/form-data" data-fv-excluded="disabled">

		<div class="modal fade" id="modalAdicionar" tabindex="-1"
			role="dialog" data-backdrop="static" data-keyboard="false"
			aria-hidden="true" style="display: none; padding-left: 0">

			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<div class="card">
						<div class="modal-header" style="display: flex;flex-direction: column;">
							<span><b>.:INSCRITOS:.</b></span>
							<div class="opciones_btn_modal" style="display: flex"></div>
						</div>
						<div class="modal-body">

							<div id="div_put"></div>
							<input type="" name="id" value="" style="display: none">
							<input type="" name="codigo" value="" style="display: none"> 
							<input type="" name="codigom" value="" style="display: none"> 
							<input type="" name="estado" value="1" style="display: none"> 
							
				          	<div class="row">
				          		<div  class="col-md-6">
				   					<div class="row">
										<div class="col-md-12">
											<div class="mb-1">
												<label for="logo" class=""><b>LOGO</b></label>
												<input placeholder="Ingrese logo"
													class="form-control fg-input data-per field_css"
													name="logo" id="logo" type="file" required="required">
											</div>
				
										</div>
				
									
										<div class="col-md-8">
											<div class="mb-1">
												<label for="ci" class=""><b>CEDULA</b></label>
												<input placeholder="Ingrese carnet.. "
													class="form-control fg-input data-per field_css"
													name="ci" type="text" required="required">
											</div>
				
										</div>
										<div class="col-md-4">
											<div class="mb-1">
												<label for="exp" class=""><b>EXP</b></label>
													<select required="required" class="form-select field_css" aria-label=".form-select-sm example" id="exp" name="exp"> 
													  <option selected value="">Seleccionar</option>
													  <option  value="TJA">TARIJA</option>
													  <option  value="PT">POTOSI</option>
													  <option  value="PD">PANDO</option>
													  <option  value="LP">LA PAZ</option>
													  <option  value="OR">ORURO</option>
													  <option  value="CBBA">COCHABAMBA</option>
													  <option  value="BE">BENI</option>
													  <option  value="CH">CHUQUISACA</option>
													  <option  value="SCZ">SANTA CRUZ</option>
													 
													</select>
											</div>
				
										</div>
										<div class="col-md-12">
											<div class="mb-1">
												<label for="nombre" class=""><b>NOMBRE Y APELLIDO</b></label>
												<input placeholder="Ingrese nombre.."
													class="form-control fg-input data-per field_css"
													name="nombrecompleto" type="text" required="required" onkeyup="this.value = this.value.toUpperCase();">
											</div>
				
										</div>
										<div class="col-md-12">
											<div class="mb-1">
												<label for="genero" class=""><b>GENERO</b></label>
													<select required="required" class="form-select field_css" aria-label=".form-select-sm example" id="genero" name="genero"> 
													  <option selected value="">Seleccionar</option>
													  <option  value="m">MASCULINO</option>
													  <option  value="f">FEMENINO</option>
													 
													</select>
											</div>
				
										</div>
				
									</div>
				          		</div>
				          		<div  class="col-md-6">
				          			<div class="row">
				     					<div class="col-md-12">
											<div class="mb-1">
											  <label for="fechanacimiento" class=""><b>FECHA DE NACIMIENTO</b></label>		
											  <input placeholder="Ingrese Fecha Nacimiento.." 
															class="form-control fg-input data-per field_css"
															name="fechanacimiento" type="date" required="required" id="fechanacimiento"
														    value="">
											</div>
					
										</div>
										
										<div class="col-md-12">
											<div class="mb-1">
												<label for="edad" class=""><b>EDAD</b></label>
												<input placeholder="Edad.."
													class="form-control fg-input data-per field_css" id="edad"
													name="edad" type="number" required="required" readonly="readonly">
											</div>
				
										</div>
						    			<div class="col-md-12">
											<div class="mb-1">
												<label for="gradoacademico" class=""><b>GRADO ACADEMICO</b></label>
												<select required="required" class="form-select field_css" aria-label=".form-select-sm example" id="gradoacademico" name="gradoacademico">
												  <option selected value="">Seleccionar</option>
												 
												</select>
											</div>
						    			</div>
									    <div class="col-md-12">
											<div class="mb-1">
												<label for="profesion" class=""><b>CARRERA</b></label>
												<select required="required" class="form-select field_css" aria-label=".form-select-sm example" id="profesion" name="profesion">
												  <option selected value="">Seleccionar</option>
												 
												</select>
											</div>
						    			</div>
				 						<div class="col-md-12">
											<div class="mb-1">
												<label for="celular" class=""><b>TELEFONO/CELULAR (Con WHATSAPP)</b></label>
												<input placeholder="Celular.."
													class="form-control fg-input data-per field_css"
													name="celular" type="number" required="required">
											</div>
				
										</div>
										<div class="col-md-12">
											<div class="mb-1">
												<label for="correo" class=""><b>CORREO</b></label>
												<input placeholder="Ingrese correo.."
													class="form-control fg-input data-per field_css"
													name="email" type="text" required="required" >
											</div>
				
										</div>
						    			
						    			<div class="col-md-12">
											<div class="mb-1">
												<label for="ciudad" class=""><b>CIUDAD</b></label>
												<select required="required" class="form-select field_css" aria-label=".form-select-sm example" id=departamento name="departamento">
												  <option selected value="">Seleccionar</option>
												 
												</select>
											</div>
						    			</div>
									    <div class="col-md-12">
											<div class="mb-1">
												<label for="provincia" class=""><b>LUGAR DE RESIDENCIA</b></label>
												<input placeholder="Ingrese provincia (Ej: Cercado)"
													class="form-control fg-input data-per field_css" id="localidad"
													name="localidad" type="text" required="required" onkeyup="this.value = this.value.toUpperCase();">
											
											</div>
						    			</div>
										<div class="col-md-12">
											<div class="mb-1">
		
												<label for="exampleFormControlInput1" class=""><b>DIRECCI√ìN DE SU RESIDENCIA</b></label>
												<textarea rows="" cols="" placeholder="Ingrese el direcci√≥n " 
													class="form-control fg-input data-per field_css" name="direccion" id="direccion"
													required="required"></textarea>
										
											</div>
		
										</div>
				          			</div>
					          	</div>
				          	</div>
							

						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	<form name="formulario2" role="form" id="formulario2" method="post"
		enctype="multipart/form-data" data-fv-excluded="disabled">

		<div class="modal fade" id="modalPlantilla" tabindex="-1"
			role="dialog" data-backdrop="static" data-keyboard="false"
			aria-hidden="true" style="display: none; padding-left: 0">

			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<div class="card">
						<div class="modal-header" style="display: flex;flex-direction: column;">
							<span><b>.:AGREGAR PLANTILLA:.</b></span>
							<div class="opciones_btn_modal2" style="display: flex"></div>
						</div>

						<div class="modal-body">

							<div id="div_put"></div>
							<input type="" name="id" value="" style="display: none">
							<input type="" name="codigo" value="" style="display: none"> 
							<input type="" name="codigom" value="" style="display: none"> 
							<input type="" name="estado" value="1" style="display: none"> 
	
							<div class="row">

							</div>
							
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
										<label for="logo" class=""><b>PLANTILLA</b></label>
										<input placeholder="Ingrese plantilla de certificado"
											class="form-control fg-input data-per  "
											name="certificado_imagen" id="certificado_imagen" type="file" required="required"
										    data-allow-reorder="true"
											>
									</div>

								</div>
							</div>
							
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
										<label for="exampleFormControlInput1" class=""><b>CODIGO CURSO</b></label>
										<input placeholder="Ingrese codigo de curso"
											class="form-control fg-input data-per "
											name="nrodocumentom" type="text" required="required" disabled="disabled" onkeyup="this.value = this.value.toUpperCase();">
										<input placeholder="Ingrese codigo de curso"
											class="" name="nrodocumento" type="hidden" required="">
									</div>

								</div>
							</div>
							
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
										<label for="exampleFormControlInput1" class=""><b>CATEGORIA</b></label>
										<select  disabled="disabled" required="required" class="form-select " aria-label=".form-select-sm example" id="categoria" name="categoria">
										  <option selected value="">Seleccionar</option>
										 
										</select>
										<input placeholder="Ingrese codigo de curso"
											class="" name="idcategoria_m" type="hidden" required="">
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
										<label for="exampleFormControlInput1" class=""><b>NOMBRE CURSO</b></label>
										<input placeholder="Ingrese de curso"
											class="form-control fg-input " disabled="disabled"
											name="nombrecurso" type="text" required="required">
									</div>

								</div>
							</div>


							
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
										<label for="exampleFormControlInput1" class=""><b>MODALIDAD</b></label>
											<select required="required" class="form-select" disabled="disabled" aria-label=".form-select-sm example" id="modalidad" name="modalidad"> 
											  <option selected value="">Seleccionar</option>
											  <option  value="p">PRESENCIAL</option>
											  <option  value="sm">SEMI PRESENCIAL</option>
											  <option  value="v">VIRTUAL</option>
											 
											</select>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
										<label for="exampleFormControlInput1" class=""><b>NIVEL</b></label>
											<select required="required" class="form-select" disabled="disabled" aria-label=".form-select-sm example" id="nivel" name="nivel"> 
											  <option selected value="">Seleccionar</option>
											  <option  value="p">BASICO</option>
											  <option  value="sm">INTERMEDIO</option>
											  <option  value="v">AVANZADO</option>
											 
											</select>
									</div>
								</div>
							</div>

							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
									  <label for="exampleFormControlInput1" class=""><b>FECHA INICIO</b></label>		
									  <input placeholder="Ingrese Fecha Inicio" 
													class="form-control fg-input data-per"
													name="fechainicial" type="date" required="required" id="fechainicial"
												    value="" disabled="disabled" >
									</div>

								</div>
							</div>
	
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
									  <label for="exampleFormControlInput1" class=""><b>FECHA FINAL</b></label>		
									  <input placeholder="Ingrese Fecha Final" 
													class="form-control fg-input data-per "
													name="fechafinal" type="date" required="required" id="fechafinal"
												    value="" disabled="disabled" >
									</div>

								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
									  <label for="exampleFormControlInput1" class=""><b>HORA</b></label>		
									  <input placeholder="Ingrese Hora" 
													class="form-control fg-input data-per "
													name="hora" type="time" required="required" id="hora"
												    value="" disabled="disabled" >
									</div>

								</div>
							</div>
							<div class="row ">
								<div class="col-md-12 ">
									<div class="mb-1">
										<label for="exampleFormControlInput1" class=""><b>EXPOSITORES</b></label>	
										<select  class="form-select" id="expositores" name="expositores" multiple="multiple" disabled="disabled">  
										 
										</select>
										 <div class="invalid-feedback">
						                    PORFAVOR SELECCIONA UNA OPCION
						                </div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<div class="mb-1">
										<label for="exampleFormControlInput1" class=""><b>LINK GRUPO</b></label>
										<input placeholder="Ingrese link del grupo WHATSAPP"
											class="form-control fg-input data-per "
											name="linkgrupo" type="text" required="required" disabled="disabled">
									</div>

								</div>
							</div>


						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	<form name="formulario3" role="form" id="formulario3" method="post"
		enctype="multipart/form-data" data-fv-excluded="disabled">

		<div class="modal fade" id="modalRenovarQr" tabindex="-1"
			role="dialog" data-backdrop="static" data-keyboard="false"
			aria-hidden="true" style="display: none; padding-left: 0">

			<div class="modal-dialog modal-md" role="document">
				<div class="modal-content">
					<div class="card">
						<div class="modal-header">
							<div class="row" style="display: contents;">
								<div class="col-md-4 ">
									<b class="" style="font-size: 16px">RENOVAR QR</b>
								</div>
								<div class="col-md-8" style="text-align: right;">
									<div class="opciones_btn_modal3"></div>
								</div>
							</div>
						</div>
						<div class="modal-body">

							<div id="div_put"></div>
							<input type="" name="id" value="" style="display: none"> 
							<input type="" name="codigo" value="" style="display: none"> 
							<input type="" name="codigom" value="" style="display: none"> 
							<input type="" name="estado" value="1" style="display: none"> 
							<div class="row mt-1">
								<div class="col-md-12 ">
									<div class="" style="border-radius: 2px; background-color: #fffbdd;padding: 1px;text-align: center;font-weight: bold;">
									  QR</div>
									<div class="renovar-rq-socio" style=""></div>
								</div>
							</div>
						
							<div class="row mt-1">
								<div class="col-md-12 input_group_cata">
									<label for="exampleFormControlInput1" class="label_cata">Cod. Curso</label>
									<input placeholder="Ingrese carnet de identidad" class="input_cata fg-input data-per field_css"
											name="nrodocumento" type="text" required="required" readonly="readonly">
									
								</div>
						
							</div>


							<div class="row mt-1">
								<div class="col-md-12 input_group_cata">
									
									<label for="exampleFormControlInput1" class="label_cata">Nombre Curso</label>

									<input placeholder="Nombre curso.." class="input_cata fg-input data-per field_css"
											name="nombrecurso" type="text" required="required"
											onkeyup="this.value = this.value.toUpperCase();" readonly="readonly">
									
								</div>
							</div>
							<div class="row mt-1">
				    			<div class="col-md-12">
									<label for="gradoacademico" class=""><b>CATEGORIA</b></label>
									<select required="required" class="form-select field_css" aria-label=".form-select-sm example" id="categoria" name="categoria">
									  <option selected value="">Seleccionar</option>
									 
									</select>
				    			</div>
							</div>
							<div class="row mt-1">
				    			<div class="col-md-12">
									<label for="gradoacademico" class=""><b>MODALIDAD</b></label>
											<select required="required" class="form-select field_css" aria-label=".form-select-sm example" id="modalidad" name="modalidad"> 
											  <option selected value="">Seleccionar</option>
											  <option  value="p">PRESENCIAL</option>
											  <option  value="sm">SEMI PRESENCIAL</option>
											  <option  value="v">VIRTUAL</option>
											 
											</select>
				    			</div>
							</div>
							
							<div class="row mt-1">
								<div class="col-md-12 input_group_cata">
								
									<label for="exampleFormControlInput1" class="label_cata">Celular</label>
									<input placeholder="Celular" class="input_cata form-control fg-input data-per field_css"
											name="celular" type="number" required="required" readonly="readonly">
									

								</div>
							</div>
							<div class="row mt-1">
								<div class="col-md-12 input_group_cata">
									
								  <label for="exampleFormControlInput1" class="label_cata">F.Emision</label>		
								  <input placeholder="Ingrese Fecha Emision" class="input_cata fg-input data-per field_css"
													name="fechaemision" type="date" required="required" id="fechaemision"
												    value="" readonly="readonly">
								

								</div>
							</div>
	
							<div class="row mt-1">
								<div class="col-md-12 input_group_cata">
									
								  <label for="exampleFormControlInput1" class="label_cata">F.Expiracion</label>		
								  <input placeholder="Ingrese Fecha Expiracion" class="input_cata fg-input data-per field_css"
													name="fechaexpiracion" type="date" required="required" id="fechaexpiracion"
												    value="" readonly="readonly">
								</div>
							</div>



						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	
		<form name="formulario4" role="form" id="formulario4" method="post"
		enctype="multipart/form-data" data-fv-excluded="disabled">

		<div class="modal fade" id="modalInscritoComprobante" tabindex="-1"
			role="dialog" data-backdrop="static" data-keyboard="false"
			aria-hidden="true" style="display: none; padding-left: 0">

			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<div class="card">
						<div class="modal-header"
							style="display: flex; flex-direction: column;">
							<span><b>.:INSCRITO:.</b></span>
							<div class="opciones_btn_modal4" style="display: flex"></div>
						</div>

						<div class="modal-body">
							<input type="hidden" placeholder="id" name="id" value=""> 
							<input type="hidden" placeholder="idinscrito" name="idinscrito" value=""> 
							<input type="hidden" placeholder="idevento" name="idevento" value=""> 
							<input type="hidden" placeholder="idpersona" name="idper" value=""> 
							<input type="hidden" placeholder="idparticipante" name="idpart" value=""> 
							<input type="hidden" placeholder="idparticipante" name="idpartact" value=""> 
					
							
							<input placeholder="" class="" name="cantidad" value="0" type="number" style="display: none">
							<input placeholder="" class="" name="precio" value="0" type="number" step="any" style="display: none"> 
							<input placeholder="" class="" name="descuento" value="0" type="number" step="any" style="display: none"> 
							<input placeholder="" class="" name="subtotal" value="0" type="number" step="any" style="display: none"> 
							<input placeholder="" class="" name="importe" value="0" type="number" step="any" style="display: none"> 
							
							<input placeholder="" class="" name="inscrito" value="" type="hidden" style="">
							<input placeholder="" class="" name="evento" value="" type=""  style="display: none">
							<input placeholder="" class="" name="anio" value="" type="" style="display: none"> 
							<input type="" name="estado" value="1" style="display: none">
							
							<div class="row" style="">
								<div class="col-md-12 card_data">
									<div class="row">
										<div class="">
											<div id="msg"></div>
											<!-- Mensajes de Verificacion -->
											<div id="error" class="alert alert-warning  ocultar"
												role="alert">
												ENCONTRADO: Complete o actualize sus datos!</div>
											<div id="ok" class="alert alert-success ocultar" role="alert">
												NUEVO: Completa los campos por favor..</div>

											<div id="error-inscrito" class="alert alert-info ocultar"
												role="alert">Usted ya est√° registrado en este evento,gracias..</div>
										</div>
										<div class="col-md-8">
											<div class="">
												<label for="ci" class=""><b>N√öMERO DE CARNET DE IDENTIDAD</b></label> <input
													placeholder="Ingrese carnet.. "
													class="form-control fg-input data-per field_css" name="ci"
													type="text" required="required" autocomplete="off"  tabindex="-1">
											</div>
										</div>
										<div class="col-md-4">
											<div class="">
												<label for="exp" class=""><b>EXPEDIDO</b></label> <select
													required="required" class="form-select field_css"
													aria-label=".form-select-sm example" id="exp" name="exp">
													<option selected value="">Seleccionar</option>
													<option value="TJA">TARIJA</option>
													<option value="PT">POTOSI</option>
													<option value="PD">PANDO</option>
													<option value="LP">LA PAZ</option>
													<option value="OR">ORURO</option>
													<option value="CBBA">COCHABAMBA</option>
													<option value="BE">BENI</option>
													<option value="CH">CHUQUISACA</option>
													<option value="SCZ">SANTA CRUZ</option>

												</select>
											</div>

										</div>
										<div class="col-md-12">
											<div class="">
												<label for="logo" class=""><b>SUBIR SU
														FOTOGRAF√çA (4X4) PARA SU CERTIFICADO (OPCIONAL)</b></label> <input
													placeholder="Ingrese logo"
													class="form-control fg-input data-per field_css"
													name="archivoimgparticipante" id="archivoimgparticipante"
													type="file">
											</div>

										</div>
										<div class="col-md-12">
											<div class="">
												<label for="nombre" class=""><b>NOMBRE COMPLETO</b></label>
												<input placeholder="Ingrese su nombre completo.."
													class="form-control fg-input data-per field_css"
													name="nombres" type="text" required="required"
													onkeyup="this.value = this.value.toUpperCase();">
											</div>

										</div>
										<div class="col-md-12">
											<div class="">
												<label for="nombre" class=""><b>APELLIDOS</b></label> <input
													placeholder="Ingrese apellidos.."
													class="form-control fg-input data-per field_css"
													name="apellidos" type="text" required="required"
													onkeyup="this.value = this.value.toUpperCase();">
											</div>

										</div>
										<div class="col-md-6">
											<div class="">
												<label for="genero" class=""><b>G√âNERO</b></label> <select
													required="required" class="form-select field_css"
													aria-label=".form-select-sm example" id="genero"
													name="genero">
													<option selected value="">Seleccionar</option>
													<option value="m">MASCULINO</option>
													<option value="f">FEMENINO</option>
													<option value="s">SIN ESPESIFICAR</option>

												</select>
											</div>

										</div>
										<div class="col-md-6">
											<div class="">
												<label for="fechanacimiento" class=""><b>FECHA
														DE NACIMIENTO</b></label> <input
													placeholder="Ingrese Fecha Nacimiento.."
													class="form-control fg-input data-per field_css"
													name="fechanacimiento" type="date" required="required"
													id="fechanacimiento" value="">
											</div>

										</div>
										<div class="col-md-6">
											<div class="">
												<label for="edad" class=""><b>EDAD</b></label> <input
													placeholder="Edad.."
													class="form-control fg-input data-per field_css" id="edad"
													name="edad" type="number" required="required">
											</div>

										</div>
										<div class="col-md-6">
											<div class="">
												<label for="celular" class=""><b>TEL√âFONO/CELULAR
														(Con WHATSAPP)</b></label> <input
													placeholder="Ingresar su nro de celular.."
													class="form-control fg-input data-per field_css"
													name="celular" type="number" required="required">
											</div>

										</div>
										<div class="col-md-6">
											<div class="">
												<label for="gradoacademico" class=""><b>GRADO
														ACAD√âMICO</b></label> <select required="required"
													class="form-select field_css"
													aria-label=".form-select-sm example" id="gradoacademico"
													name="gradoacademico">
													<option selected value="">Seleccionar</option>

												</select>
											</div>
										</div>

										<div class="col-md-6">
											<div class="">
												<label for="profesion" class=""><b>CARRERA </b></label> <select
													required="required" class="form-select field_css"
													aria-label=".form-select-sm example" id="profesion"
													name="profesion">
													<option selected value="">Seleccionar</option>

												</select>
											</div>
										</div>

										<div class="col-md-6">
											<div class="">
												<label for="email" class=""><b>CORREO
														ELECTR√ìNICO (GMAIL)</b></label> <input
													placeholder="Ingrese su correo GMAIL.."
													class="form-control fg-input data-per field_css"
													name="email" type="text" required="required">
											</div>

										</div>

										<div class="col-md-6">
											<div class="">
												<label for="departamento" class=""><b>CIUDAD DE
														RESIDENCIA</b></label> <select required="required"
													class="form-select field_css"
													aria-label=".form-select-sm example" id="departamento"
													name="departamento">
													<option selected value="">Seleccionar</option>

												</select>
											</div>
										</div>
										<div class="col-md-6">
											<div class="">
												<label for="departamento" class=""><b>SUCURSAL
														DE RESIDENCIA</b></label> <select class="form-select field_css"
													aria-label=".form-select-sm example" id="provincia"
													name="provincia">
													<option selected value="">Seleccionar</option>

												</select>
											</div>
										</div>


										<div class="col-md-12">
											<div class="">
												<label for="exampleFormControlInput1" class=""><b>¬øCERTIFICADO
														F√çSICO √ì DIGITAL?</b></label><br>
												<!-- 									<span>Te informamos que apartir de ahora nuestros certificados cuentan con un codigo QR √∫nico -->
												<!-- 										  de autenticidad, por lo que puedes escoger, si deseas tu certificaci√≥n f√≠sica o digital.	 -->
												<span>
													IMPORTANTE: Solo puede escoger una sola modalidad: f√≠sico o digital. Ten en cuenta que nuestros certificados contienen un c√≥digo QR personalizado que valida la autenticidad. üôåüèª
												
												</span> 
												 <select
													required="required" class="form-select field_css"
													aria-label=".form-select-sm example" id="tipocertificado"
													name="tipocertificado">
													<option selected value="">Elige tu certificado</option>
													<option value="FISICO">FISICO</option>
													<option value="DIGITAL">DIGITAL</option>
													<option value="AMBOS">AMBOS</option>
												</select>
												<div style="" class="certificado">
													<span class=""> * En caso de que sea f√≠sico se
														enviar√° hasta su ciudad de residencia, <b>env√≠o en 7
															d√≠as h√°biles. Una vez concluida la¬†capacitaci√≥n.</b> <br>
														* En caso de que sea digital se enviar√° a su correo
														electr√≥nico y WhatsApp, <b> env√≠o de 8 a 12 horas una
															vez concluida la capacitaci√≥n.</b>
													</span>
												</div>

											</div>
										</div>

										<div class=" col-md-12 mt-1">

											<div class="shadow evento_comprobantepago "
												style="padding: 2px;">
												<label for="logo" class=""><b>FOTO DEL
														COMPROBANTE DE PAGO REALIZADO</b></label> <input
													placeholder="Ingrese logo"
													class="form-control fg-input data-per field_css"
													name="archivoimgpago" id="archivoimgpago" type="file"
													required="required">
											</div>


										</div>

										<div class="col-md-12 content-mas-detalles mt-3">
											<a class="btn-mas-detalles" type="button">
												<i class="fa fa-angle-double-down" aria-hidden="true"></i>
												M√°s Detalles
											</a>
										</div>

										<div class="mt-1 ">
											<div class="contenido-detalles-evento  ocultar">

												<div class="col-md-12  ">
													<div class="evento_title">CONGRESO BOLIVIANO DE
														CONTADUR√çA P√öBLICA, CIENCIAS EMPRESARIALES Y FINANCIERAS</div>
													<div class="shadow evento_body ">
														<div class="evento_content">
															<div class="evento_content_izq">
																<div class=" shadow rounded evento_body_detalle">
																	<div class="row">
																		<div class="col-md-6">
																			<label><b>FECHA INICIO: </b></label> <span
																				class="evento_f_inicio"> 12-02-2024</span>
																		</div>
																		<div class="col-md-6">
																			<label><b>FECHA FIN: </b></label> <span
																				class="evento_f_fin"> 22-02-2024</span>
																		</div>
																		<div class="col-md-6">
																			<label><b>HORA DE INICIO: </b></label> <span
																				class="evento_hora">11:00</span>
																		</div>
																		<div class="col-md-6">
																			<label><b>MODALIDAD: </b></label> <span
																				class="evento_modalidad">PRESENCIAL</span>
																		</div>

																		<div class="col-md-6">
																			<label><b>PRECIO: </b></label> <span
																				class="evento_precio">200.00</span> Bs.
																		</div>
																		<div class="col-md-6">
																			<label><b>CERTIFICADO: </b></label> <span
																				class="evento_certificado">SI</span>
																		</div>
																		<!-- 														 
														<div class="col-md-6">
															<label><b>EVALUACIONES: </b></label> <span
																class="evento_evaluacion">NO</span>
														</div>-->
																		<div class="col-md-12">
																			<label><b>LUGAR DEL EVENTO: </b></label> <span
																				class="evento_lugarevento">Lugar del evento</span>
																		</div>
																	</div>

																</div>
																<div class=" shadow evento_cursos_title mt-2">
																	<div class="">.:DETALLE:.</div>
																</div>
																<div class="shadow evento_content_cursos">

																	<div class="card_evento_curso">
																		<div class="card_evento_curso_img_expositor">
																			<a href="../../img/poster1.png"
																				th:href="@{/img/poster1.png}" data-fancybox="">
																				<img src="../../img/poster1.png"
																				alt="Trendy Pants and Shoes"
																				class="img-fluid img-thumbnail " />
																			</a>
																		</div>
																		<div class="card_evento_curso_contenido">
																			<div class="row mb-1">
																				<div class="col-md-6">
																					<b>Categoria: </b><span
																						class="card_evento_curso_txt_categoria">Auditoria</span>
																				</div>
																				<div class="col-md-6">
																					<b>Nivel: </b><span
																						class="card_evento_curso_txt_nivel">Basico</span>

																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<b> <span
																						class="card_evento_curso_txt_nombre_curso">Auditoria
																							Intermedia 2</span></b>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<b>Fecha: </b><span
																						class="card_evento_curso_txt_fechacurso">yyyy-mm-dd</span>
																				</div>

																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<b>De Horas: </b><span
																						class="card_evento_curso_txt_hora_inicial">12:00</span>
																					- <span class="card_evento_curso_txt_hora_final">14:00</span>
																				</div>

																			</div>
																			<div class="row mb-1">
																				<div class="col-md-12">
																					<b>En: </b><span
																						class="card_evento_curso_txt_lugarcurso">Carrera
																						de Contabilidad Redes </span>
																				</div>

																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<b>Por: </b><span
																						class="card_evento_curso_txt_gradoacademico">PhD.</span>
																					<span class="card_evento_curso_txt_expositor">Luis
																						Fernando Garcia P</span>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<b><span class="card_evento_curso_txt_rubro">
																							Catedr√°tico Em√©rito UMSA</span> </b>
																				</div>
																			</div>
																		</div>

																	</div>

																</div>

															</div>
															<div class="evento_content_der">
																<div class="">
																	<label><b>EVENTO: </b></label> <span
																		class="evento_tipo">REQUIERE INVERSI√ìN</span>
																</div>
																<div class="evento_afiche text-center">
																	<div class="evento_afiche_img">
																		<a href="../../img/poster1.png"
																			th:href="@{../../img/poster1.png}" data-fancybox="">
																			<img src="../../img/poster1.png"
																			th:src="@{../../img/poster1.png}" alt=""
																			class="img-fluid img-thumbnail rounded"
																			style="width: 100%; height: 300px;">
																		</a>
																	</div>
																</div>
															</div>

														</div>
													</div>
												</div>
												<div class="col-md-12">
													<div class="evento_cursos"></div>
												</div>
												<div class="col-md-12">

													<div class=" shadow evento_metodospagos">
														<div class="evento_metodospagos_title">Formas de
															Inscripci√≥n</div>
														<div class=" evento_content_metodospagos">
															<div class="card_evento_metodopago">
																<div class="card_evento_metodopago_img">
																	<img src="../../img/poster1.png"
																		alt="Trendy Pants and Shoes"
																		class="img-fluid img-thumbnail " />
																</div>
															</div>
														</div>
													</div>



												</div>
											</div>
											<div class="mt-3 mb-1 col-md-12 text-center">
												<div class="mx-auto">
													<div id="registrado" class="alert alert-success  ocultar"
														role="alert" style="margin-top: 10px;">Hemos
														registrado con exito su inscripcion, revise su
														correo@gmail por favor..</div>
													<button id="btnGuardar_modal " type="submit"
														class=" btn_inscribirme" style="">
														<i class="fa fa-floppy-o" aria-hidden="true" style=""></i>
														GUARDAR CAMBIOS
													</button>


												</div>
											</div>
										</div>



									</div>
								</div>

							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	
	<h4 class="">
		<b>.: CURSOS :.</b>
	</h4>
	<div class="contenido_gestion">
		<div class="panel-body">
			<div class="row">
				<div class="col-md-12">

					<div class="row" style="margin-bottom: 10px;">
						<div class="col-md-2 col-xs-12">
							<input type="text" id="js_filtro_curso_detalle" name=""
								class="form-control" placeholder="Nombre de curso ..">
						</div>
						


						<div class="col-md-3 col-xs-12" style="">
							<div class="opciones_estado"></div>
							<div class="form-check form-check-inline">
								<input type="radio" class="form-check-input " name="iestado" id="activos" value="1" autocomplete="off" checked>
								<label for="activos">habilitados</label>
							</div>
							<div class="form-check form-check-inline">
								<input type="radio" class="form-check-input" name="iestado"
										id="inactivo" value="0" autocomplete="off"> 
								<label for="inactivo">deshabilitados</label>
							</div>
						</div>
						<div class="col-md-2 col-xs-12">
							<select class="form-select "
								aria-label=".form-select-sm example" id="seventocurso"
								name="seventocurso">
								<option selected="" value="">Todos los eventos</option>
		
							</select>
		
						</div>
						<div class="col-md-2 col-xs-12">
							<select class="form-select "
								aria-label=".form-select-sm example" id="scategoriacurso"
								name="scategoriacurso">
								<option selected="" value="">Todas las categorias</option>
		
							</select>
		
						</div>
						
						<div class="col-md-3 col-xs-12" style="">
							<div>
								<span class="opciones_btn_nuevo"></span> 
								<span class="opciones_btn_eliminar"></span> 
								<span class="opciones_btn_habilitar"></span>
								<span class="opciones_btn_certificado">
									<button id="btnCertificado" class="btn btn-secondary waves-effect btn-sm " style="margin: 0 2px;" onclick="funcSavePlanillaCertificado()" data-mdb-ripple-init>IMPRIMIR PARTICIPANTES</button>
								</span>
							</div>

						</div>
					</div>
				</div>
				<div class="col-md-12 table-responsive">
					<table id="table_certificados" class="table align-middle mb-0 bg-white " style="width: 100%; background: white;">
						<thead class="bg-light">
							<tr>
								<th>ITEM</th>
								<th>FECHA INICIO</th>
								<th>FECHA FIN</th>
								<th>NOMBRE DE EVENTO</th>
								<th>NOMBRE DE CURSO</th>
								<th>CATEGORIA</th>
						</thead>
						<tbody class="table-group-divider table-divider-color">
							
						</tbody>
					</table>

				</div>
				
				
				
			</div>
		</div>
	</div>
	<br>
	<div class="card">

		<div class="card-body">

			<h5 class="">
				<b>.: ESTUDIANTES:.</b>
			</h5>
			<div class="row">

				<div class="col-md-12 col-xs-12" style="text-align: center;margin-bottom: 5px;background: #08b8b5;padding: 5px;">
					<div>
						<span class="opciones_btn_update_qr">
							<button id="btnUpdateQr" class="btn btn-secondary waves-effect btn-sm " style="margin: 0 2px;" onclick="funcRenovarQr()" data-mdb-ripple-init>RENOVAR QR</button>
						</span>
						<span class="opciones_btn_ver_certificado">
							<button id="btnVerCertificado" class="btn btn-secondary waves-effect btn-sm " style="margin: 0 2px;" onclick="funcVerCertificado()" data-mdb-ripple-init>VER CERTIFICADO</button>
						</span>
						<span class="opciones_btn_ver_certificados_marcados">
							<button id="btnVerCertificadosMarcados" class="btn btn-secondary waves-effect btn-sm " style="margin: 0 2px;" onclick="funcVerCertificadosMarcados()" data-mdb-ripple-init>VER CERTIFICADOS</button>
						</span>
						<span class="opciones_btn_ver_certificados_marcados">
							<button id="btnVerCertificadosMarcados" class="btn btn-secondary waves-effect btn-sm " style="margin: 0 2px;" onclick="funcEnviarCertificado()" data-mdb-ripple-init>ENVIAR CERTIFICADO</button>
						</span>
						<span class="opciones_btn_qr">
							<button id="btnHabilitarQr" class="btn btn-secondary waves-effect btn-sm" style="margin: 0 2px;" onclick="funcEnviarCertificadosMarcados()" data-mdb-ripple-init>ENVIAR CERTIFICADOS</button>
						</span>
						<span class="opciones_btn_ver_certificado">
							<button id="btnVerComprobante"
								class="btn btn-secondary waves-effect btn-sm "
								style="margin: 0 2px;" onclick="funcVerComprobante()"
								data-mdb-ripple-init>VER COMPROBANTE</button>
						</span>
					</div>

				</div>
				<div class="col-md-2 col-xs-12">
					<input type="text" id="js_filtro" name="" class="form-control"
						placeholder="Buscar por nombre o nro. de carnet de identidad..">
				</div>
				<div class="col-md-2 col-xs-12">
					<select class="form-select field_css" aria-label=".form-select-sm example" id="tipocertificadofil" name="tipocertificadofil">
						<option selected="" value="">Tipo de certificado</option>
						<option value="FISICO">FISICO</option>
						<option value="DIGITAL">DIGITAL</option>
						<option value="AMBOS">AMBOS</option>
					</select>
				</div>
				<div class="col-md-12 col-xs-12" style="text-align: right;margin-bottom: 2px;background: #e9eced;padding: 5px;margin-top: 5px;">
						
					<div class="form-check form-check-inline">
						<input type="radio" class="form-check-input " name="iestadodet"
							id="activosdet" value="1" autocomplete="off" checked> <label
							for="activosdet">habilitados</label>
					</div>
					<div class="form-check form-check-inline">
						<input type="radio" class="form-check-input" name="iestadodet"
							id="inactivodet" value="0" autocomplete="off"> <label
							for="inactivodet">deshabilitados</label>
					</div>
					<div class="opciones_btn_eliminardet" style="display: inline-block;"></div>	
					<div class="opciones_btn_habilitardet" style="display: inline-block;"></div>
					
					<button id="btn_select_all" class="btn_select_all">Seleccionar todos de pagina actual</button>
					<button id="btn_select_all_global" class="btn_select_all_global">Seleccionar todos de todas las paginas</button>
				</div>
				<div class="col-md-12 table-responsive mt-3">

					<table id="table" class="table align-middle mb-0 bg-white" style="width: 100%; background: white;">
						<thead class="bg-light">
							<tr>
								<th>NRO.FOLIO</th>
								<th>FECHA DE REGISTRO</th>
								<th>CI</th>
								<th>NOMBRE COMPLETO</th>
								<th>CORREO</th>
								<th>CELULAR</th>
								<th>CIUDAD</th>
								<th>SUCURSAL</th>
								<th>TIPO CERTIFICADO</th>
								<th>ENVIADO</th>
								<th>CURSO</th>
								<th>IMPRIMIR</th>
							</tr>
						</thead>
						<tbody>

						</tbody>
					</table>
				</div>

			 </div>
		
		</div>
	</div>

	<script type="text/javascript">
		
	$(document).ready(function() {
    
	
	});
		var GGESTION=-1;
		var GOPCION=""
// 		var result=Get_Opciones(null);
		var GID=""
		var GSEARCH=""
		var GESTADO='';
		var DTtable=''
		var nameEntity="../RestCertificadosCursos"
		var nameEntity1="../RestGradosAcademicos"
		var nameEntity2="../RestProfesiones" 
		var nameEntity3="../RestDepartamentos"
		var nameEntity4="../RestProvincias"

		//parte2
		var GDATO_INSCRITO="";
		var GOPCION_INSCRITO=""
		var GID_INSCRITO=""
		
		var GID_CURSO_DET=-2
		var GID_CURSO_CERT=-1
		var GID_EVENTO_CERT=-2
		var GID_CATEGORIA_CERT=-1
		var GID_ANIO_DET=-1
		var GID_EVENTO_DET=-1
		var GID_EVENTO_DET_S=-2
		var GID_CATEGORIA_DET=-1
		
		var GSEARCH_INSCRITO=""
		var GESTADO_INSCRITO=-1;
		
		var GID_TIPOCERTIFICADO_DET=""
		
		var DTtable_INSCRITO=''
		var nameEntity_INSCRITO="../RestCertificadosCursos"
		var nameEntity_CORREO="../RestCertificadosCursosCorreos"
		var nameEntityd2="../RestCategorias"

	
		GSEARCH_INSCRITO=$('#js_filtro').val()
		GESTADO_INSCRITO=$('input[name="iestadodet"]:checked').val();
		
		$('#js_filtro').on('keyup',function(){
			GSEARCH_INSCRITO=$(this).val()

		})
		
        $('input[name="iestadodet"]').on('change',function(){
	        	console.log("table certificados")
	        	GESTADO_INSCRITO=$('input[name="iestadodet"]:checked').val();
	        	GSEARCH_INSCRITO=$('#js_filtro').val()
	        	setButtonCrud2(GESTADO_INSCRITO)
	        	GDATO="";//para que al momento de eliminar o habilitar se tenga que seleccionar un registro de la tabla
// 	        	$('#table_certificados').dataTable().fnDraw('page');
	        	
	            var dataTable_estado = $.fn.dataTable.fnIsDataTable($('#table'));
	            if (dataTable_estado) {
	                $('#table').DataTable().ajax.reload();
	            } else {
	                console.warn("La tabla 'table_certificados' no est√° inicializada a√∫n.");
					DTtable_INSCRITO=''
					iniciando_table_certificados();
	            }
	        	
	        	
	        	
        })	
		setButtonCrud2(GESTADO_INSCRITO)
		function setButtonCrud2(estado) {
			if (estado==1) {
				$('.opciones_btn_habilitardet').html("")
				$('.opciones_btn_eliminardet').html(`<button id="btnEliminarDet" class="btn_del_det" style="margin: 0 2px;" onclick="funtUpdateRowDet()">Deshabilitar</button>`)

// 			    $('.opciones_btn_nuevo').html(`<button id="btnAdicionar" class="btn btn-secondary btn-md waves-effect btn-sm" onclick="funtNewFormModal()" style="margin: 0 2px;">Nuevo</button>`)  


			}else{
// 			    if(ExisteOpcion('habilitar')){
// 			    	$('.opciones_btn_nuevo').html('')
			    	$('.opciones_btn_eliminardet').html('')
			        $('.opciones_btn_habilitardet').html(`<button id="btnHabilitar" class="btn_hab_det" style="margin: 0 2px;" onclick="funtUpdateRowDet()">Habilitar</button>`)  
// 			    }
			}
		}
		
		
// 		if (typeof G_JSON_ENTITY === 'undefined') {
		    var G_JSON_ENTITY = null;
		    // AquÔøΩ puedes inicializar G_JSON_ENTITY como necesites
// 		}
// 		if (typeof G_JSON_PERSONA_ENTITY === 'undefined') {
		    var G_JSON_PERSONA_ENTITY = null;
		    // AquÔøΩ puedes inicializar G_JSON_ENTITY como necesites
// 		}


		var bodyANIO = document.querySelector('body');
		var selectElementANIO = bodyANIO.querySelector('#select-anios');
		var selectedValueANIO = selectElementANIO.value;
		GID_ANIO_DET=selectedValueANIO;
		console.log("GID_ANIO_DET:",GID_ANIO_DET)


		// Obtener el elemento body
		var bodyANIO = document.querySelector('body');
		// Encontrar el select con ID 'select-anios' dentro del body
		var selectElementANIO = bodyANIO.querySelector('#select-anios');
		
		// Obtener el texto de la opci√≥n seleccionada
		var isGestionANIO = selectElementANIO.options[selectElementANIO.selectedIndex].textContent;
		var selectedValueANIO = selectElementANIO.value;
		GGESTION=selectedValueANIO;
		console.log("value select gestionANIO:",selectedValueANIO)					
		console.log("text select gestionANIO:",isGestionANIO)	
		
// 		var selectanio=document.getElementById("body").querySelector("#select-anios"); 
// 		GGESTION=selectanio.value;
		console.log(" GANIO:",GGESTION)


		// Funci√≥n para calcular la edad a partir de la fecha de nacimiento
		function calcularEdad(fechaNacimiento) {
		    var hoy = new Date();
		    var edad = hoy.getFullYear() - fechaNacimiento.getFullYear();
		    var mes = hoy.getMonth() - fechaNacimiento.getMonth();
		    if (mes < 0 || (mes === 0 && hoy.getDate() < fechaNacimiento.getDate())) {
		        edad--;
		    }
		    return edad;
		}
		
		// Evento para el campo de entrada de fecha de nacimiento
		document.querySelector('#formulario input[name="fechanacimiento"]').addEventListener('input', function() {
		    var fechaNacimiento = new Date(this.value); // Obtener fecha de nacimiento del campo
		    var edad = calcularEdad(fechaNacimiento); // Calcular la edad
		    document.getElementById('edad').value = edad; // Mostrar la edad en un campo de texto
		});

		var xhr = new XMLHttpRequest();//inicializando un objeto para realizar solicitudes HTTP asincronas
  		xhr.open('GET', nameEntity1 );//abre una solicitud GET y hacia la direccion establecida
  		xhr.responseType = 'json';//el tipo de respuesta que espera desde el servidor
  		xhr.onload = function() {//cuando se complete la solicitud de manera exitosa
   		  if (xhr.status === 200) {//se verifica el estado de la respuesta
   		    var data = xhr.response;//se asigna la respuesta
   		    // Hacer algo con el resultado aquÔøΩ
//  		     console.log("GRADOS ACADEMICOS:",data);
	   		 data.forEach(function(item) {
	   		    if (item.estado == 1) {
	   		        var option = document.createElement('option');
	   		        option.value = item.id;
	   		        option.textContent = item.nombre;
// 	   		        document.getElementById('gradoacademico').appendChild(option);
	                var select1 = document.querySelector('#formulario select[name="gradoacademico"]');
	                if (select1) {
	                    select1.appendChild(option);
	                }
	   		    }
	   		});
   		  }
   		};
   		xhr.send();
		
   		
  		
		var xhr1 = new XMLHttpRequest();//inicializando un objeto para realizar solicitudes HTTP asincronas
  		xhr1.open('GET', nameEntity2 );//abre una solicitud GET y hacia la direccion establecida
  		xhr1.responseType = 'json';//el tipo de respuesta que espera desde el servidor
  		xhr1.onload = function() {//cuando se complete la solicitud de manera exitosa
   		  if (xhr1.status === 200) {//se verifica el estado de la respuesta
   		    var data = xhr1.response;//se asigna la respuesta
   		    // Hacer algo con el resultado aquÔøΩ
//  		     console.log("PROFESIONES:",data);
	   		 data.forEach(function(item) {
	   		    if (item.estado == 1) {
	   		        var option = document.createElement('option');
	   		        option.value = item.id;
	   		        option.textContent = item.nombre;
// 	   		        document.getElementById('profesion').appendChild(option);
	                var select2 = document.querySelector('#formulario select[name="profesion"]');
	                if (select2) {
	                    select2.appendChild(option);
	                }
	   		    }
	   		});
   		  }
   		};
   		xhr1.send();
   		
		var xhr3 = new XMLHttpRequest();//inicializando un objeto para realizar solicitudes HTTP asincronas
  		xhr3.open('GET', nameEntity3 );//abre una solicitud GET y hacia la direccion establecida
  		xhr3.responseType = 'json';//el tipo de respuesta que espera desde el servidor
  		xhr3.onload = function() {//cuando se complete la solicitud de manera exitosa
   		  if (xhr3.status === 200) {//se verifica el estado de la respuesta
   		    var data = xhr3.response;//se asigna la respuesta
   		    // Hacer algo con el resultado aquÔøΩ
//  		     console.log("DEPARTAMENTOS:",data);
	   		 data.forEach(function(item) {
	   		    if (item.estado == 1) {
	   		        var option = document.createElement('option');
	   		        option.value = item.id;
	   		        option.textContent = item.nombre;
// 	   		        document.getElementById('departamento').appendChild(option);
	                var select3 = document.querySelector('#formulario select[name="departamento"]');
	                if (select3) {
	                    select3.appendChild(option);
	                }
	   		    }
	   		});
   		  }
   		};
   		xhr3.send();

   		$('#formulario').find('select[name="expositores"]').chosen({
   			width: '100%',
  		    no_results_text: 'No se encontraron resultados',
   	        placeholder_text_multiple: 'Seleccionar expositores',
   	        placeholder_text_single: 'Selecciona una opci√≥n',
   	        search_contains: true
   		});
   		$('#formulario2').find('select[name="expositores"]').chosen({
   			width: '100%',
  		    no_results_text: 'No se encontraron resultados',
   	        placeholder_text_multiple: 'Seleccionar expositores',
   	        placeholder_text_single: 'Selecciona una opci√≥n',
   	        search_contains: true
   		});

		$('#formulario').find('input[name="logo"]').fileinput({
		  	language:'es',
		    showUpload: false, // Ocultar el bot√É¬≥n de carga
		    showRemove: true, 
            showCaption: true,
            showCancel: true,
            previewFileType: 'any'
		});
		
		$('#formulario2').find('input[name="certificado_imagen"]').fileinput({
		  	language:'es',
		    showUpload: false, // Ocultar el bot√É¬≥n de carga
		    showRemove: true, 
            showCaption: true,
            showCancel: true,
            previewFileType: 'any'
		});
		


	      
		GSEARCH=$('#js_filtro').val()
		GESTADO=$('input[name="iestado"]:checked').val();
		
		$("#tipocertificadofil").on('change',function(){
			var idtipo=$(this).val();
			console.log("idtipocertificado:",idtipo)
			if(idtipo==""){
				console.log("entro evento blanco")
				GID_TIPOCERTIFICADO_DET="";
			}else{
				GID_TIPOCERTIFICADO_DET=idtipo;
			}
			$('#table').dataTable().fnDraw('page');
// 			$('#table').DataTable().ajax.reload();
// 			console.log("GID_TIPOCERTIFICADO_DET:",GID_TIPOCERTIFICADO_DET)
//             var dataTable_estado = $.fn.dataTable.fnIsDataTable($('#table'));
//             console.log("dataTable_estado:",dataTable_estado)
//             if (dataTable_estado) {
//                 $('#table').DataTable().ajax.reload();
//             } else {
//                 console.warn("La tabla 'table_certificados' no est√° inicializada a√∫n.");
// 				DTtable_INSCRITO=''
// 				iniciando_table_certificados();
//             }
		})
			
		
		
// 		listarTable()
		$('#js_filtro').on('keyup',function(){
			GSEARCH=$(this).val()
// 			console.log(GSEARCH)

		})

        $('input[name="iestado"]').on('change',function(){
        	GESTADO=$('input[name="iestado"]:checked').val();
        	GSEARCH=$('#js_filtro').val()
        	setButtonCrud(GESTADO)
        	GDATO="";//para que al momento de eliminar o habilitar se tenga que seleccionar un registro de la tabla
        	$('#table_certificados').dataTable().fnDraw('page');

				isGlobalSelectAll = false;
				isAllSelected = false; // Indica si todas las filas est√°n seleccionadas
				certificadosIds = [];  // Array para almacenar los IDs de los certificados   
						
				selectedIds = []; // Limpiar el array de IDs seleccionados
		       	$('#table .row-checkbox').prop('checked', false); // Desmarcar todos los checkboxes
		            
		       	$('#btn_select_all_global').text('Seleccionar todos');
		       	$('#btn_select_all').text('Seleccionar todos de pagina actual');
				       	

				GID_CURSO_DET=-2
				GID_CURSO_CERT=-1
				GID_EVENTO_CERT=-1
				GID_CATEGORIA_CERT=-1
	            GDATO_INSCRITO=''
	            GID_INSCRITO=''
// 				GID_CATEGORIA_DET=-1;
// 				GID_EVENTO_DET=-1;
// 				GID_EVENTO_DET_S=-2;
// 				resetSelectCategoria();
// 				mostrarCategoriasDetalle();

// 				console.log('mostrando table_certificados')

			   	var dataTable_estado = $.fn.dataTable.fnIsDataTable($('#table'));
			    if (dataTable_estado) {
			    	$('#table').DataTable().ajax.reload();
				} else {
			    	console.warn("La tabla 'table_certificados' no est√° inicializada a√∫n.");
					DTtable_INSCRITO=''
					iniciando_table_certificados();
				}
        	
        	
        })

        
		document.getElementById("categoria").addEventListener("change", function() {
		    // C√≥digo a ejecutar cuando el valor del elemento con id "categoria" cambia
		    let val_idcat;
		    let idcat = this.value;
		    let categoria_abriatura = this.options[this.selectedIndex].getAttribute('data-abr');
		    if (isNaN(idcat)) {
		        val_idcat = idcat;
		    } else {
		        val_idcat = idcat;
		    }
		
		    var xhr = new XMLHttpRequest();
		    xhr.open('GET', nameEntity + '/getTotCursoPorCategoria/' + val_idcat);
		    xhr.responseType = 'json';
		
		    xhr.onload = function() {
		        if (xhr.status === 200) {
		            var result2 = xhr.response;
		            console.log('getTotCursoPorCategoria:', result2);
		            
		            
		            let NRO_DOCUMENTO = 'AL' + '-' +categoria_abriatura + '-' + result2;
               	    if(GOPCION=="ADD"){
    		            // Asignar valor a inputs con name="nrodocumentom" y name="nrodocumento"
    		            document.getElementById('formulario').querySelector('input[name="codigo"]').value = result2; 
    		            var formulario = document.getElementById('formulario');
    		            var inputs = formulario.querySelectorAll('input[name="nrodocumentom"], input[name="nrodocumento"]');
    		            inputs.forEach(function(input) {
    		                input.value = NRO_DOCUMENTO;
    		            });
            	    }else  if(GOPCION=="EDIT"){
            	    	var idcategoria_m_value_edit = document.getElementById('formulario').querySelector('input[name="idcategoria_m"]').value;
            	    	var codigo_m_value_edit = document.getElementById('formulario').querySelector('input[name="codigom"]').value;
            	    	var nrodocumento_m_value_edit = document.getElementById('formulario').querySelector('input[name="idcategoria_m"]').getAttribute('data-nrodocumento');


            	    	if (idcategoria_m_value_edit!=val_idcat) {
							//si se esta seleccionando una categoria diferente a la que estaba al modificar, ahi si se cambia el nrodocumento y codigo
	    		            document.getElementById('formulario').querySelector('input[name="codigo"]').value = result2; 
	    		            
	    		            var formulario = document.getElementById('formulario');
	    		            var inputs = formulario.querySelectorAll('input[name="nrodocumentom"], input[name="nrodocumento"]');
	    		            inputs.forEach(function(input) {
	    		                input.value = NRO_DOCUMENTO;
	    		            });
						}else{
							document.getElementById('formulario').querySelector('input[name="codigo"]').value = codigo_m_value_edit; 
							document.getElementById('formulario').querySelector('input[name="codigom"]').value = codigo_m_value_edit; 
				            var formulario = document.getElementById('formulario');
	    		            var inputs = formulario.querySelectorAll('input[name="nrodocumentom"], input[name="nrodocumento"]');
	    		            inputs.forEach(function(input) {
	    		                input.value = nrodocumento_m_value_edit;
	    		            });
						}
            	    }

		        }
		    };
		
		    xhr.send();
		});

        
        
        
        
        DTtable=$('#table_certificados').DataTable({
            "oLanguage": {
                     "sUrl": "../js/Spanish.lang"

            }
        ,
            "dom":'rt<button>ip',
            "pageLength":10,
             responsive:true,
            "processing": true,
            "serverSide": true, 
            
            "ajax": {
            "type": "GET",
              "url": nameEntity+""+"/listar",
          	"data": function ( d ) {
//                     d.estado = GESTADO;
//                     d.idanio = GGESTION

          		 	d.estado = GESTADO
                    d.idevento= GID_EVENTO_DET
                    d.idanio=GGESTION
                    d.idcategoria= GID_CATEGORIA_DET
                    
             }
            }
            ,
            "columns": [
                { "data": "id" },
                { "data": "id" },
                { "data": "id" },
//                 { "data": "id" },
                { "data": "id" },
                { "data": "id" },
                { "data": "id" }
//                 { "data": "id" }
      		]
            ,
            "createdRow":function(row,data,index){
//                 console.log("DATA:",data)

                $('td',row).eq(0).html((index+1)+""+`<input type="hidden" value="${data.id}" class="idhidden">`).addClass('text-center');
                $('td',row).eq(1).html(data.fechainicial+""+`<input type="hidden" value="${data.idevento}" class="idhidden">`);
                $('td',row).eq(2).html(data.fechafinal+""+`<input type="hidden" value="${data.idcategoria}" class="idhidden">`);
                $('td',row).eq(3).html(data.detalle);
                $('td',row).eq(4).html(data.nombrecurso);
                $('td',row).eq(5).html(data.categoria);

            } 
        
            ,
            "drawCallback":function(settings){
				////$('button[data-toggle="tooltip"]').tooltip({animated: 'fade',placement: 'bottom',});
            	$('#js_filtro_curso_detalle').on( 'keyup', function (){
                    DTtable.search(this.value ).draw();
                }) 

            }
        });
        
		


        // Construye la URL con los dos par√°metros
        $.get(`${nameEntity}/getEventByIdAnio/${GID_ANIO_DET}`, function (data) {
            if (Array.isArray(data)) {
                const $select = $('select[name="seventocurso"]'); // Buscar el <select>
                if ($select.length === 0) {
                    console.error('No se encontr√≥ el <select> con el nombre "seventocurso".');
                    return;
                }

                // Limpiar opciones previas
                $select.empty();

                // Agregar opci√≥n por defecto
                $select.append($('<option>', {
                    value: "",
                    text: "Todos los eventos"
                }));

                // Agregar opciones desde los datos recibidos
                $.each(data, function (index, item) {
                    if (item.estado === 1) {
                        $select.append($('<option>', {
                            value: item.id,
                            text: item.detalle
                        }));
                    }
                });
            } else {
                console.error('La respuesta del servidor no es un array:', data);
            }
        }).fail(function (xhr, status, error){
            console.error('Error en la solicitud:', error);
        });
        
        // Construye la URL con los dos par√°metros
        $.get(`${nameEntity}/getCategoryByIdAnio/${GID_EVENTO_DET_S}/${GID_ANIO_DET}`, function (data){
            if (Array.isArray(data)) {
                const $select = $('select[name="scategoriacurso"]'); // Buscar el <select>
                if ($select.length === 0) {
                    console.error('No se encontr√≥ el <select> con el nombre "scategoriacurso".');
                    return;
                }

                // Limpiar opciones previas
                $select.empty();

                // Agregar opci√≥n por defecto
                $select.append($('<option>', {
                    value: "",
                    text: "Todas las categor√≠as"
                }));

                // Agregar opciones desde los datos recibidos
                $.each(data, function (index, item){
                    if (item.estado === 1) {
                        $select.append($('<option>', {
                            value: item.id,
                            text: item.nombre
                        }));
                    }
                });
            } else {
                console.error('La respuesta del servidor no es un array:', data);
            }
        }).fail(function (xhr, status, error) {
            console.error('Error en la solicitud:', error);
        });
        
        
		function mostrarCategoriasDetalle(){
	        // Construye la URL con los dos par√°metros
	        $.get(`${nameEntity}/getCategoryByIdAnio/${GID_EVENTO_DET_S}/${GID_ANIO_DET}`, function (data) {
	            if (Array.isArray(data)) {
	                const $select = $('select[name="scategoriacurso"]'); // Buscar el <select>
	                if ($select.length === 0) {
	                    console.error('No se encontr√≥ el <select> con el nombre "scategoriacurso".');
	                    return;
	                }

	                // Limpiar opciones previas
	                $select.empty();

	                // Agregar opci√≥n por defecto
	                $select.append($('<option>', {
	                    value: "",
	                    text: "Todas las categor√≠as"
	                }));

	                // Agregar opciones desde los datos recibidos
	                $.each(data, function (index, item) {
	                    if (item.estado === 1) {
	                        $select.append($('<option>', {
	                            value: item.id,
	                            text: item.nombre
	                        }));
	                    }
	                });
	            } else {
	                console.error('La respuesta del servidor no es un array:', data);
	            }
	        }).fail(function (xhr, status, error) {
	            console.error('Error en la solicitud:', error);
	        });
		}
        

		setButtonCrud(GESTADO)
		function setButtonCrud(estado) {
			if (estado==1) {
				$('.opciones_btn_habilitar').html("")
// 		 	    if(ExisteOpcion('adicionar')){
			        $('.opciones_btn_nuevo').html(`<button id="btnAdicionar" class="btn btn-secondary btn-md waves-effect btn-sm" onclick="funtNewFormModal()" style="margin: 0 2px;">Nuevo</button>`)  
// 			    }

			}else{
// 			    if(ExisteOpcion('habilitar')){
			    	$('.opciones_btn_nuevo').html('')
			    	$('.opciones_btn_eliminar').html('')
			        $('.opciones_btn_habilitar').html(`<button id="btnHabilitar" class="btn btn-secondary  btn-sm waves-effect btn" style="margin: 0 2px;" onclick="funtUpdateRow()">Habilitar</button>`)  
// 			    }
			}
		}
		
		
	  //INICIO QUERY PRINCIPAL

			//eventos
			var GDATO="";
			//click en la tabla
			$('#table_certificados tbody').on( 'click dblclick', 'tr', function (e){
				let G_JSON_ENTITY=new Object();
				var row = $(this).closest('tr');
				if(e.type=='dblclick'){//mostramos el modal para el CRUD
// 					console.log($(this).find("td:eq(1)").text());
					
					addDisabledForm()
					opcionesCrudModal();
					getEntityId()

					
					
					
					
					
// 	          		$('#modalAdicionar').modal('show');
				}
				if(e.type=='click'){//mostramos el modal para el CRUD
					console.log('se hizo un solo click')
// 					var idr1 = parseInt(row.find('.idhidden').val(), 10);
// 					console.log('id_participante:',idr1)
// 					GID_CURSO_DET=idr1;
					
					// Obtener los valores de los inputs ocultos en la fila actual
					var idr1 = parseInt(row.find('.idhidden').eq(0).val(), 10);
					console.log('id_participante:', idr1);
					GID_CURSO_CERT = idr1;

					var idr2 = parseInt(row.find('.idhidden').eq(1).val(), 10);
					console.log('id_evento:', idr2);
					GID_EVENTO_CERT = idr2;

					var idr3 = parseInt(row.find('.idhidden').eq(2).val(), 10);
					console.log('id_categoria:', idr3);
					GID_CATEGORIA_CERT = idr3;
					
					  if (isNaN(idr1)) {
						  alert('Debe seleccionar un estudiante para mostrar los cursos!!');
					  }else{
						
						// Reiniciar los checkboxes seleccionados
						//selectedIds = []; // Array para almacenar los IDs seleccionados
						isGlobalSelectAll = false;
						isAllSelected = false; // Indica si todas las filas est√°n seleccionadas
						certificadosIds = [];  // Array para almacenar los IDs de los certificados   
						
						selectedIds = []; // Limpiar el array de IDs seleccionados
				       	$('#table .row-checkbox').prop('checked', false); // Desmarcar todos los checkboxes
				            
				       	$('#btn_select_all_global').text('Seleccionar todos');
				       	$('#btn_select_all').text('Seleccionar todos de pagina actual');
				       	
						//aqui datatable

// 						GID_CATEGORIA_DET=-1;
// 						GID_EVENTO_DET=-1;
// 						GID_EVENTO_DET_S=-2;

			            GDATO_INSCRITO=''
			            GID_INSCRITO=''
			            

// 						resetSelectCategoria();
// 						mostrarEventosDetalle();
// 						mostrarCategoriasDetalle();

						console.log('mostrando table_certificados')
				       	

			            var dataTable_estado = $.fn.dataTable.fnIsDataTable($('#table'));
			            if (dataTable_estado) {
			                $('#table').DataTable().ajax.reload();
			            } else {
			                console.warn("La tabla 'table_certificados' no est√° inicializada a√∫n.");
// 			                iniciando aqui el dataTable llamando a la funcion
							DTtable_INSCRITO=''
							iniciando_table_certificados();
			            }
						
					  }


				}
				

				var idr = parseInt(row.find('.idhidden').val(), 10);
// 				console.log('idr:',idr);
          		 if ( $(this).hasClass('selected') ) {
                       $(this).removeClass('selected');
                       GDATO=""
                  }
                  else {
                      $('#table_certificados tr.selected').removeClass('selected');
                      $(this).addClass('selected');
                      
           	          	 GDATO=$(this).find("td:eq(0)").text();
//                    console.log('GDATO:',GDATO);
                      
                  }

				GID=idr
// 				console.log('GID:',GID);
			})
			

			function JsonDataForm() {
				var serialized = $('#formulario').serializeArray();
		        var s = '';
		        var data = new Object();
				data.celular=$("input[name='celular']").val();
				data.ci=$("input[name='ci']").val();
				data.email=$("input[name='email']").val();
				var estado_data=parseInt($("input[name='estado']").val());
// 				console.log('estado_data:',estado_data)
				data.estado=1;
				data.id=null;
				data.nombrecompleto=$("input[name='nombrecompleto']").val();
				data.password=$("input[name='password']").val();
				

		        return data;
			}

			
			function funtNewFormModal() {
				$('.field_css').removeAttr('disabled') 
				opcionesNuevo()
				getEntityIdNew()

       			$('#modalAdicionar').modal('show');
			}
			function funtDeleteRow() {
				if (GDATO!="" ) {
					updateStatusEntity(1)//si quiero dar de baja pongo 1
				}else{
					alert("!seleccione un registro de la lista para eliminar el registro!")
				}
			}
			function funtUpdateRow(){
				if (GDATO!="" ) {
					updateStatusEntity(0)//si quiero dar de baja pongo 0
				}else{
					alert("!seleccione un registro de la lista para habilitar el registro!")
				}
			}

			function funcSavePlanillaCertificado() {
			    // Resetea el formulario
			    $('#formulario2')[0].reset();
			    let G_JSON_ENTITY = new Object();

			    $('.roles_sistema').html('')

			    // Elimina la selecci√≥n previa en los selects
			    let elem_gradoacademico = document.getElementById("categoria").getElementsByTagName("option");
			    for (var i = 0; i < elem_gradoacademico.length; i++) {
			        elem_gradoacademico[i].removeAttribute("selected");
			    }
			    let elem_modalidad = document.getElementById("modalidad").getElementsByTagName("option");
			    for (var i = 0; i < elem_modalidad.length; i++) {
			        elem_modalidad[i].removeAttribute("selected");
			    }
			    let elem_nivel = document.getElementById("nivel").getElementsByTagName("option");
			    for (var i = 0; i < elem_nivel.length; i++) {
			        elem_nivel[i].removeAttribute("selected");
			    }

			    // Selecciona los expositores
			    var arrayChosen = [];
			    var select = document.querySelector('#formulario2 select[name="expositores"]');

			    Array.from(select.options).forEach(function (option) {
			    	option.selected = arrayChosen.includes(parseInt(option.value));
			    });

			    // Si jQuery Chosen est√° siendo utilizado, actualiza su UI
			    $('#formulario2').find('select[name="expositores"]').trigger('chosen:updated');

			    if (GDATO != "") {
			        $.get(nameEntity + '/' + GID, function (data) {
			            console.log('datos a modificar planilla:', data)
			            G_JSON_ENTITY = data;
			            $('#formulario2').find('input[name="id"]').val(data.id);
			            $('#formulario2').find('input[name="codigo"]').val(data.codigo);
			            $('#formulario2').find('input[name="codigom"]').val(data.codigo);
			            $('#formulario2').find('input[name="nrodocumentom"]').val(data.nrodocumento);
			            $('#formulario2').find('input[name="nrodocumento"]').val(data.nrodocumento);
			            $('#formulario2').find('input[name="nombrecurso"]').val(data.nombrecurso);
			            $('#formulario2').find('input[name="fechainicial"]').val(data.fechainicial);
			            $('#formulario2').find('input[name="fechafinal"]').val(data.fechafinal);
			            $('#formulario2').find('input[name="hora"]').val(data.hora);
			            $('#formulario2').find('input[name="linkgrupo"]').val(data.linkgrupo);

			            $('#formulario2').find('input[name="idcategoria_m"]').val(data.categoria.id).attr('data-nrodocumento', data.nrodocumento);

			            // Selecciona la categor√≠a
			            document.querySelectorAll("#categoria > option").forEach(function (option) {
			                if (option.value == data.categoria.id) {
			                    option.selected = true;
			                }
			            });

			            // Selecciona la modalidad
			            document.querySelectorAll("#modalidad > option").forEach(function (option) {
			                if (option.value == data.modalidad) {
			                    option.selected = true;
			                }
			            });

			            // Selecciona el nivel
			            document.querySelectorAll("#nivel > option").forEach(function (option) {
			                if (option.value == data.nivel) {
			                    option.selected = true;
			                }
			            });

			            // Selecciona los expositores
			            arrayChosen = data.expositores.map(function (item) { return item.id; });
			            console.log('array_plamtailla_2: ', arrayChosen);
			            var select_expositores = document.querySelector('#formulario2 select[name="expositores"]');

			            // Depuraci√≥n: Verifica las opciones del select y arrayChosen
			            console.log('Select options:', Array.from(select_expositores.options).map(opt => opt.value));
			            console.log('ArrayChosen:', arrayChosen);

			            Array.from(select_expositores.options).forEach(function (option) {
			            	if (arrayChosen.includes(parseInt(option.value))) {
			                    option.selected = true;
			                } else {
			                    option.selected = false;
			                }
			                console.log(`Option value: ${option.value}, Selected: ${option.selected}`); // Depuraci√≥n
			            });

			            // Si jQuery Chosen est√° siendo utilizado, actualiza su UI
			            $('#formulario2').find('select[name="expositores"]').trigger('chosen:updated');
			            
			            
	  	                
	  	                
  	    			    var xhr1 = new XMLHttpRequest();
  	    			    let nombrelogodefecto=data.imagencertificado;
  	    			    xhr1.open("GET", "../plantillas/"+nombrelogodefecto);
  	    			    xhr1.responseType = "blob";
  	    			    xhr1.onload = function() {
  	    			        var blob = xhr1.response;
  	    			        var file = new File([blob], nombrelogodefecto);
  	    			        var inputFile = document.getElementById('certificado_imagen');
  	    			        var fileList = new DataTransfer();
  	    			        fileList.items.add(file);
  	    			        inputFile.files = fileList.files;
  	    			        inputFile.title = nombrelogodefecto;
  	    			    };
  	    			    xhr1.send();
  	    				
  	    				$('#formulario2').find('input[name="certificado_imagen"]').fileinput('destroy');
  	    				
  	    				
  	    				$('#formulario2').find('input[name="certificado_imagen"]').fileinput({
  	    				  	language:'es',
  	    				    showUpload: false, // Ocultar el bot√É¬≥n de carga
  	    				    showRemove: true, 
  	                        showCaption: true,
  	                        showCancel: true,
//  	    		 		  	 ,maxImageWidth: 300 // Ancho m√Ø¬ø¬Ωximo de la imagen previa en p√Ø¬ø¬Ωxeles
//  	    		 		     ,maxImageHeight: 300 
  	    				    initialPreview: [
  	    				        `<img src="../plantillas/${nombrelogodefecto}" class="file-preview-image" alt="Vista previa" title="${nombrelogodefecto}">`
  	    				    ],
  	    				    initialPreviewConfig: [
  	    				        {
  	    				            caption: nombrelogodefecto, // Texto que aparecer√É¬° debajo de la imagen en la vista previa
  	    				            width: '200px', // Ancho de la imagen en la vista previa
  	    				            url: '/', // URL opcional para el enlace de eliminaci√É¬≥n (en este caso, se establece como '#')
  	    				            key: 1 // Clave √É¬∫nica para el elemento de vista previa
  	    				        }
  	    				    ],
  	    				    fileActionSettings: {
  	    				        removeIcon: '', // Vaciar el icono del bot√É¬≥n de eliminar
  	    				        removeClass: 'hide-remove', // Aplicar una clase para ocultar el bot√É¬≥n de eliminar
  	    				        removeTitle: '', // Vaciar el t√É¬≠tulo del bot√É¬≥n de eliminar
  	    				    },
//  	     				    browseTitle: 'Mi titulo personalizado',
//  	     				    browseLabel: 'Seleccionar archivo',
  	    		    		initialCaption: nombrelogodefecto //para poner el nombre en la caja del file

  	    				});
  	    			    

			        }, 'json');
			        opcionesPlantillaForm()
			        $('#modalPlantilla').modal('show');
			    } else {
			        alert("¬°Seleccione un registro para seleccionar cat√°logos!");
			    }
			}

			

			
			
			function funcRenovarQr() {
				/* $('#formulario2')[0].reset();

				if (GDATO!="" ) {
					$.get(nameEntity+'/'+GID, function(data) {
						G_JSON_ENTITY=data;

			  			$('#formulario3').find('input[name="id"]').val(data.id);
			  			$('#formulario3').find('input[name="codigo"]').val(data.codigo);
			  			$('#formulario3').find('input[name="ci"]').val(data.persona.ci);
			  			$('#formulario3').find('input[name="matricula"]').val(data.matricula);
			  			$('#formulario3').find('input[name="nombresocio"]').val(data.nombresocio);
			  			$('#formulario3').find('input[name="celular"]').val(data.persona.celular);
			  			$('#formulario3').find('input[name="fechaemision"]').val(data.fechaemision);
			  			$('#formulario3').find('input[name="fechaexpiracion"]').val(data.fechaexpiracion);
			  			$('#formulario3').find('.renovar-rq-socio').html(`
			  					<a href="../qrcodes/${data.nrodocumento}.png" th:href="@{/qrcodes/${data.nrodocumento}.png}" data-fancybox="">
								<img src="../qrcodes/${data.nrodocumento}.png" th:src="@{/qrcodes/${data.nrodocumento}.png}" alt="" class="img-thumbnail w-100">	
								</a>			
	  					`);

			  			
			        }, 'json');
					opcionesRenovarQrForm()
		      		$('#modalRenovarQr').modal('show');
				}else{
					alert("!SELECCIONE UN REGISTRO DE LA LISTA PARA RENOVAR QR!")
				}
	*/
	
	
			
			const swalWithBootstrapButtons = Swal.mixin({
			  customClass: {
			    confirmButton: 'btn btn-success',
			    cancelButton: 'btn btn-danger'
			  },
			  buttonsStyling: false
			})
			
			swalWithBootstrapButtons.fire({
			  title: "¬øEstas Seguro de continuar?",   
		      text: "Se renovara el qr del certificado",   
			  icon: 'warning',
			  showCancelButton: true,
			  confirmButtonText: 'Si, Continuar!',
			  cancelButtonText: 'No, Cancelar!',
			  reverseButtons: true
			}).then((result) => {
			  if (result.isConfirmed) {
						var data= {
		         	    	id:GID_INSCRITO,
		         	    	codigo:"",
		         	    	nombre:"",
		         	    	estado:status
		         	    }
						console.log(JSON.stringify(data))
		               $.ajax({
		             	   	url:nameEntity_INSCRITO+"/renovarqr",
		             	    type: "POST",
			                contentType: "application/json",
			                dataType:'json',
							'data': JSON.stringify(data),
		
		                    success:function(res){
								console.log('registrado',res)
		//						removeRowLastTable(res.id)
								$('#table').dataTable().fnDraw('page');
		                        Swal.fire({
		                            title:"Completado",
		                            text:"Se ha completado la transaccion exitosamente",
		                            icon:"success",
		                            timer:700,   
		                            showConfirmButton: false 
		                        });
							   		
		                    }
		                })
			                 $('.modal').modal('hide')  
				  
		
			  } else if (
			    /* Read more about handling dismissals below */
			    result.dismiss === Swal.DismissReason.cancel
			  ) {
				    swalWithBootstrapButtons.fire({
				    	icon:'error',
				    	title:"Cancelado",
		                text:"Se ha cancelado operacion",
		                timer:800,
		                showCancelButton:false,
		             	showConfirmButton:false
				    })
			  }
			})
			}
		
			function funcMostrarCertificados() {

				if (GDATO!="" ){
					$('#table_certificados').dataTable().fnDraw('page');
				}else{
					alert("!SELECCIONE UN REGISTRO DE LA LISTA DE PARTICIPANTES PARA MOSTRAR LOS CURSOS!")
				}
	
			}
			
			$('#btnEditar').click(function(){
// 				console.log(GDATO)
				if (GDATO!="" ) {
					opcionesEditarForm()
					getEntityId()
					removeDisabledForm()
	       			$('#modalAdicionar').modal('show');
				}else{
					alert("!seleccione un registro de la lista para editar!")
				}
				
			})
			function addDisabledForm() {
				
				$('body .field_css').attr('disabled', 'disabled');
			}
			function removeDisabledForm() {
				
				$('.field_css').removeAttr('disabled');
			}
			function addActionform(action) {
				$('#formulario').removeAttr("action")
				$('#formulario').attr("action",action)
				
			}
			function addActionformEmpresa(action) {
				$('#formulario2').removeAttr("action")
				$('#formulario2').attr("action",action)
				
			}
			function addActionformQr(action) {
				$('#formulario3').removeAttr("action")
				$('#formulario3').attr("action",action)
				
			}
			function addPutForm(value) {
				$('#formulario #div_put').html("")
				if(value!== undefined){
				//+console.log("value",value)
					$('#formulario #div_put').html(`<input type="hidden" name="_method" value="PUT">`)
				}
			}
			
			function nuevo() {
				opcionesNuevo()
				getEntityIdNew()
				removeDisabledForm()
			}
			function editar() {
				opcionesEditarForm()
				getEntityId()
                removeDisabledForm()
			}
			function eliminar() {
				updateStatusEntity(1)

			}
			function opcionesNuevo() {
				GOPCION="ADD"
					$('.opciones_btn_modal').html('')
                $('.opciones_btn_modal').html(`<button id="btnGuardar_modal" type="submit"  class="btn btn-secondary  waves-effect btn-sm" style="margin: 0 2px;">Guardar</button>`)  
       	        $('.opciones_btn_modal').append(`<button id="btnCancelar_modal"  type="button"  data-bs-dismiss="modal" aria-label="Close" class="btn btn-light waves-effect btn-sm" style="margin: 0 2px;">Cancelar</button>`)  
                addActionform(nameEntity)
//        	        $('#formulario').data('formValidation').resetForm(true);
                $('#formulario')[0].reset();
			}
			function opcionesEditarForm() {
				GOPCION="EDIT"
					$('.opciones_btn_modal').html('')
                $('.opciones_btn_modal').html(`<button id="btnGuardar_modal" type="submit"  class="btn btn-secondary waves-effect btn-sm" style="margin: 0 2px;">Guardar</button>`)  
       	        $('.opciones_btn_modal').append(`<button id="btnCancelar_modal"  type="button" data-bs-dismiss="modal" aria-label="Close" class="btn btn-light waves-effect btn-sm" style="margin: 0 2px;">Cancelar</button>`)  
                addActionform(nameEntity)
//        	        $('#formulario').data('formValidation').resetForm(true);
                $('#formulario')[0].reset();
      
			}
			function opcionesPlantillaForm() {
				GOPCION="PLANTILLA"
				$('.opciones_btn_modal2').html('')
                $('.opciones_btn_modal2').html(`<button id="btnGuardar_modal" type="submit"  class="btn btn-success  btn-xs btn-sm waves-effect btn-sm" style="margin: 0 2px;">Guardar</button>`)  
       	        $('.opciones_btn_modal2').append(`<button id="btnCancelar_modal"  type="button" data-bs-dismiss="modal" aria-label="Close" class="btn btn-danger   btn-xs btn-sm waves-effect btn-sm" style="margin: 0 2px;">Cancelar</button>`)  
                addActionformEmpresa(nameEntity)
//        	        $('#formulario').data('formValidation').resetForm(true);
                $('#formulario2')[0].reset();
      
			}
			function opcionesRenovarQrForm() {
				GOPCION="QR"
				$('.opciones_btn_modal3').html('')
                $('.opciones_btn_modal3').html(`<button id="btnGuardar_modal" type="submit"  class="btn btn-success  btn-xs btn-sm waves-effect btn-sm" style="margin: 0 2px;">Renovar</button>`)  
       	        $('.opciones_btn_modal3').append(`<button id="btnCancelar_modal"  type="button" data-bs-dismiss="modal" aria-label="Close" class="btn btn-danger   btn-xs btn-sm waves-effect btn-sm" style="margin: 0 2px;">Cancelar</button>`)  
                addActionformQr(nameEntity)
//        	        $('#formulario').data('formValidation').resetForm(true);
                $('#formulario3')[0].reset();
      
			}
			function getEntityId() {
//                 console.log('pedir roles mod')
            	var check=""
            	
            	let elem_exp = document.getElementById("exp").getElementsByTagName("option");
			    for(var i = 0; i < elem_exp.length; i++) {
			    	elem_exp[i].removeAttribute("selected");
			    } 
           	    let elem_genero = document.getElementById("genero").getElementsByTagName("option");
   			    for(var i = 0; i < elem_genero.length; i++) {
   			    	elem_genero[i].removeAttribute("selected");
   			    }  	
   	      	    let elem_gradoacademico = document.getElementById("gradoacademico").getElementsByTagName("option");
			    for(var i = 0; i < elem_gradoacademico.length; i++) {
			    	elem_gradoacademico[i].removeAttribute("selected");
			    }  	
			    
          	    let elem_profesion = document.getElementById("profesion").getElementsByTagName("option");
			    for(var i = 0; i < elem_profesion.length; i++) {
			    	elem_profesion[i].removeAttribute("selected");
			    }  
			    
          	    let elem_departamento = document.getElementById("departamento").getElementsByTagName("option");
			    for(var i = 0; i < elem_departamento.length; i++) {
			    	elem_departamento[i].removeAttribute("selected");
			    }  

                
          		$.get(nameEntity+'/'+GID, function(data){
          			console.log('datos a modificar:',data)
					G_JSON_ENTITY=data;
// 					console.log("G_JSON_ENTITY_MMODIFICAR :",G_JSON_ENTITY)
//           			$('#formulario').loadJSON(data);
          			$('#formulario').find('input[name="id"]').val(data.id);
          			$('#formulario').find('input[name="codigo"]').val(data.codigo);
          			$('#formulario').find('input[name="codigom"]').val(data.codigo);
          			$('#formulario').find('input[name="ci"]').val(data.persona.ci);
         			document.querySelectorAll("#formulario #exp > option").forEach(function(option) {
           			    if (option.value == data.persona.exp) {
           			        option.selected = true;
           			    }
           			});
          			$('#formulario').find('input[name="nombrecompleto"]').val(data.persona.nombrecompleto);
    				

          			document.querySelectorAll("#formulario #genero > option").forEach(function(option) {
           			    if (option.value == data.persona.genero){
           			        option.selected = true;
           			    }
           			});
    				
          			$('#formulario').find('input[name="fechanacimiento"]').val(data.persona.fechanacimiento);
          			$('#formulario').find('input[name="edad"]').val(data.persona.edad);
          			
         			document.querySelectorAll("#formulario  #gradoacademico > option").forEach(function(option) {
           			    if (option.value == data.gradoacademico.id) {
           			        option.selected = true;
           			    }
           			});
         			document.querySelectorAll("#formulario  #profesion > option").forEach(function(option) {
           			    if (option.value == data.profesion.id) {
           			        option.selected = true;
           				}
         			});
             		$('#formulario').find('input[name="celular"]').val(data.persona.celular); 
          			$('#formulario').find('input[name="email"]').val(data.persona.email);
          			
         			document.querySelectorAll("#formulario  #departamento > option").forEach(function(option) {
           			    if (option.value == data.departamento.id) {
           			        option.selected = true;
           				}
         			});
           			$('#formulario').find('input[name="localidad"]').val(data.localidad);
          			$('#formulario').find('textarea[name="direccion"]').val(data.persona.direccion);
          			
          			

          			
    			    var xhr1 = new XMLHttpRequest();
    			    let nombrelogodefecto=data.imagen;
    			    xhr1.open("GET", "../participanteslogos/"+nombrelogodefecto);
    			    xhr1.responseType = "blob";
    			    xhr1.onload = function() {
    			        var blob = xhr1.response;
    			        var file = new File([blob], nombrelogodefecto);
    			        var inputFile = document.getElementById('logo');
    			        var fileList = new DataTransfer();
    			        fileList.items.add(file);
    			        inputFile.files = fileList.files;
    			        inputFile.title = nombrelogodefecto;
    			    };
    			    xhr1.send();
    				
    				$('#formulario').find('input[name="logo"]').fileinput('destroy');
    				
    				
    				$('#formulario').find('input[name="logo"]').fileinput({
    				  	language:'es',
    				    showUpload: false, // Ocultar el bot√É¬≥n de carga
    				    showRemove: true, 
                        showCaption: true,
                        showCancel: true,
//    		 		  	 ,maxImageWidth: 300 // Ancho m√Ø¬ø¬Ωximo de la imagen previa en p√Ø¬ø¬Ωxeles
//    		 		     ,maxImageHeight: 300 
    				    initialPreview: [
    				        `<img src="../participanteslogos/${nombrelogodefecto}" class="file-preview-image" alt="Vista previa" title="${nombrelogodefecto}">`
    				    ],
    				    initialPreviewConfig: [
    				        {
    				            caption: nombrelogodefecto, // Texto que aparecer√É¬° debajo de la imagen en la vista previa
    				            width: '200px', // Ancho de la imagen en la vista previa
    				            url: '/', // URL opcional para el enlace de eliminaci√É¬≥n (en este caso, se establece como '#')
    				            key: 1 // Clave √É¬∫nica para el elemento de vista previa
    				        }
    				    ],
    				    fileActionSettings: {
    				        removeIcon: '', // Vaciar el icono del bot√É¬≥n de eliminar
    				        removeClass: 'hide-remove', // Aplicar una clase para ocultar el bot√É¬≥n de eliminar
    				        removeTitle: '', // Vaciar el t√É¬≠tulo del bot√É¬≥n de eliminar
    				    },
//     				    browseTitle: 'Mi titulo personalizado',
//     				    browseLabel: 'Seleccionar archivo',
    		    		initialCaption: nombrelogodefecto //para poner el nombre en la caja del file

    				});
    			    
          			
          			
		        }, 'json');
			}
			function getEntityIdNew(){

			}
			
			
			function opcionesCrudModal() {
				$('body').find('.opciones_btn_modal').html('')
				
				if(GESTADO!=0){
					$('.opciones_btn_modal').html(`<button id="btnAdicionar_modal" type="button"  class="btn btn-secondary waves-effect btn-sm" data-mdb-ripple-init style="margin: 0 2px;" onclick="nuevo()">Nuevo</button>`)  
	    	        
				}
                $('.opciones_btn_modal').append(`<button id="btnEditar_modal" type="button"  class="btn btn-secondary waves-effect btn-sm" data-mdb-ripple-init style="margin: 0 2px;" onclick="editar()">Editar</button>`)  
    	        if(GESTADO!=0){
    	        	$('.opciones_btn_modal').append(`<button id="btnEliminar_modal" type="button"  class="btn btn-secondary waves-effect btn-sm" data-mdb-ripple-init style="margin: 0 2px;" onclick="eliminar()">Eliminar</button>`)  
        	        
    	        }
    	        $('.opciones_btn_modal').append(`<button id="btnCancelar_modal" type="button"  data-bs-dismiss="modal" aria-label="Close" class="btn btn-light waves-effect btn-sm" data-mdb-ripple-init style="margin: 0 2px;">Cancelar</button>`)  
   	        	addActionform(nameEntity)
//     	        $('#formulario').data('formValidation').resetForm(true);
                $('#formulario')[0].reset();
			}
			


			async function saveEntityForm1() {
                 
                let formData = new FormData(document.getElementById('formulario'))
		        let selectedOptions = Array.from($('#expositores option:selected'));

                 console.log("forDAta:",formData)
// 				 let imagenform = formData.get('arte');
                 
             	$.ajax({
              	   	url:nameEntity+"/guardar",
              	    type: "POST",
//						'contentType': "application/json",
					contentType: false,
					processData: false,
//						'contentType':false,
					data: formData,
//	              	    'dataType': 'json',
                     success:function(res){
						console.log('registrado',res)
                             $('#formulario')[0].reset();
                             $('.modal').modal('hide')
                      	Swal.fire({
                             title:"Registrado",
                             text:"Se ha registrado exitosamente",
                             icon:"success",
                             timer:700,   
                             showConfirmButton: false 
                         });   
                        $('#table').dataTable().fnDraw('page');
//                          }
                     },
                     error:function(err){
                    	 console.log(err)
       	 				Swal.fire({
					    	icon:'error',
					    	title:"Cancelado",
	                        text:"No se realizo la operacion, comunicarse con el administrador del Sistema, Gracias",
	                        timer:2000,
	                        showCancelButton:false,
	                     	showConfirmButton:false
					    })
                     }
                 })
			}

			function updateTable(id,objectMod){
                $('#table > tbody  > tr').each(function(index, tr){
             	   
	               	var row = $(this).closest('tr');
	    			var idrow = parseInt(row.find('.idhidden').val(), 10);
					//console.log('idrow:',idrow);
                	if(id==idrow){
                		$(this).find("td:eq(1)").html(objectMod.nombre);
                	}
               	 });
			}

			function updateEntityForm1() {
	            
	                let formData = new FormData(document.getElementById('formulario'))
	                console.log("ID MOD:",GID)
	                console.log("forDAta mod:",formData)

	    	        $.ajax({
	              	   	url:nameEntity+"/modificar/"+GID,
	              	    type: "POST",
//						'contentType': "application/json",
						contentType: false,
						processData: false,
//						'contentType':false,
						data: formData,
//	              	    'dataType': 'json',
	                     success:function(res){
	                    	 objectMod=res
	                         $('#formulario')[0].reset();
	                         $('.modal').modal('hide')
	                          Swal.fire({
	                             title:"Registrado",
	                             text:"Se ha modificado exitosamente",
	                             icon:"success",
	                             timer:700,   
	                             showConfirmButton: false 
	                         });  
	                         $('#table').dataTable().fnDraw('page');
	                     },
	                     error:function(err){
	                    	 console.log('error',err)
	       	 				Swal.fire({
						    	icon:'error',
						    	title:"Cancelado",
		                        text:"No se realizo la operacion, comunicarse con el administrador del Sistema, Gracias",
		                        timer:2000,
		                        showCancelButton:false,
		                     	showConfirmButton:false
						    })
	                     }
	                	
	                 })
				}
			function updatePlantillaCurso1(){
	            
                let formData = new FormData(document.getElementById('formulario2'))
                console.log("ID MOD:",GID)
                console.log("forDAta mod plantilla:",formData)

    	        $.ajax({
              	   	url:nameEntity+"/modificar_plantilla/"+GID,
              	    type: "PUT",
//					'contentType': "application/json",
					contentType: false,
					processData: false,
//					'contentType':false,
					data: formData,
//              	    'dataType': 'json',
                     success:function(res){
                    	 objectMod=res
                         $('#formulario')[0].reset();
                         $('.modal').modal('hide')
                          Swal.fire({
                             title:"Registrado",
                             text:"Se ha modificado exitosamente",
                             icon:"success",
                             timer:700,   
                             showConfirmButton: false 
                         });  
                         $('#table').dataTable().fnDraw('page');
                     },
                     error:function(err){
                    	 console.log('error',err)
       	 				Swal.fire({
					    	icon:'error',
					    	title:"Cancelado",
	                        text:"No se realizo la operacion, comunicarse con el administrador del Sistema, Gracias",
	                        timer:2000,
	                        showCancelButton:false,
	                     	showConfirmButton:false
					    })
                     }
                	
                 })
			}
		
	
			function updatePlantillaCurso() {
//                 console.log("G_JSON_ENTITY_ANTES:",G_JSON_ENTITY)
                

                async function construirJsonEntity() {

// 					G_JSON_ENTITY=new Object()
					G_ARRAY_EMPRESAS=new Array()
					
					
					G_JSON_PERSONA_ENTITY=G_JSON_ENTITY.persona
					
					let id = $('#formulario2').find('input[name="id"]').val();
				    G_JSON_ENTITY.id = id ? id : 0;
					let codigo= $('#formulario2').find('input[name="codigo"]').val();
				    G_JSON_ENTITY.codigo = codigo ? codigo : 0;
				    
				    G_JSON_ENTITY.matricula = $('#formulario2').find('input[name="matricula"]').val();
				    G_JSON_ENTITY.nombresocio = $('#formulario2').find('input[name="nombresocio"]').val();
				    G_JSON_ENTITY.fechaemision = $('#formulario2').find('input[name="fechaemision"]').val();
				    G_JSON_ENTITY.fechaexpiracion = $('#formulario2').find('input[name="fechaexpiracion"]').val();
				    G_JSON_ENTITY.estado = $('#formulario2').find('input[name="estado"]').val();

// 			    	G_JSON_PERSONA_ENTITY.id=null;
			    	G_JSON_PERSONA_ENTITY.ci=$('#formulario2').find('input[name="ci"]').val();;
			    	G_JSON_PERSONA_ENTITY.nombrecompleto=null;
			    	G_JSON_PERSONA_ENTITY.email=null;
			    	G_JSON_PERSONA_ENTITY.celular=$('#formulario2').find('input[name="celular"]').val();
			    	G_JSON_PERSONA_ENTITY.estado=1
			    	
			    	G_JSON_ENTITY.persona = G_JSON_PERSONA_ENTITY;
					
			    	/*
			        let select = document.getElementById('catalogos');
			        for (let option of select.options) {
			            if (option.selected) {
			      			$.get('../RestCatalogos/'+option.value+"", function(emp) {
			      				console.log("empresa:",emp)
			      				G_ARRAY_EMPRESAS.push(emp)
			      			}, 'json')
			            }else{
			            	G_ARRAY_EMPRESAS=null
			            }
			        }
			        G_JSON_ENTITY.catalogos=G_ARRAY_EMPRESAS;
			        */
			        
			        let selectedOptions = Array.from($('#catalogos option:selected'));

			        // Realizar una solicitud AJAX para cada opci√≥n seleccionada
			        let promises = selectedOptions.map(option => {
			            return new Promise((resolve, reject) => {
			                $.get('../RestCatalogos/' + option.value, function(emp) {
			                    
			                	resolve(emp);
			                }).fail(function(error) {
			                    reject(error);
			                });
			            });
			        });

			        // Esperar a que se completen todas las solicitudes AJAX
			        let empresas = await Promise.all(promises);

			        // Agregar las empresas obtenidas al JSON
			        G_JSON_ENTITY.catalogos = empresas;
			    	
				    return G_JSON_ENTITY;
				}
                
             	async function obtenerJsonEntity(){
				    try {
				        let jsonEntity = await construirJsonEntity();
// 				        console.log("JSON MODIFICAR PRE:",jsonEntity)
				        return JSON.stringify(jsonEntity);
				    } catch (error) {
				        console.error('Error al construir el JSON de compra entity:', error);
				        return null;
				    }
				}
                
				obtenerJsonEntity().then(json => {
				    if (json !== null) {
//        					console.log("JSON MODIFICAR SERVER EMP",json)
               
	        	        $.ajax({
		              	   	url:nameEntity+"/catalogos/"+GID,
		              	    type: "PUT",
							'contentType': "application/json",
							'data': json,
		              	    'dataType': 'json',
		              	  	async: false,
		                     success:function(res){
		                    	 objectMod=res
		                         $('#formulario2')[0].reset();
		                         $('.modal').modal('hide')
		                          Swal.fire({
		                             title:"Registrado",
		                             text:"Se ha modificado exitosamente",
		                             icon:"success",
		                             timer:700,   
		                             showConfirmButton: false 
		                         });  
		                         $('#table').dataTable().fnDraw('page');
		                     },
		                     error:function(err){
		                    	 console.log(err)
	           	 				Swal.fire({
							    	icon:'error',
							    	title:"Cancelado",
			                        text:"No se realizo la operacion, comunicarse con el administrador del Sistema, Gracias",
			                        timer:2000,
			                        showCancelButton:false,
			                     	showConfirmButton:false
							    })
		                     }
		                	
		                 })
				        
				        
				    } else {
				        console.error('Error al obtener el JSON de compra entity');
				    }
				});
                
			}
			
			
			function updateQRSocio(){
//          console.log("G_JSON_ENTITY_ANTES:",G_JSON_ENTITY)
                

                async function construirJsonEntity() {

// 					G_JSON_ENTITY=new Object()
					G_ARRAY_EMPRESAS=new Array()
					G_JSON_PERSONA_ENTITY=G_JSON_ENTITY.persona;
					let id = $('#formulario3').find('input[name="id"]').val();
				    G_JSON_ENTITY.id = id ? id : 0;
					let codigo= $('#formulario3').find('input[name="codigo"]').val();
				    G_JSON_ENTITY.codigo = codigo ? codigo : 0;
				    G_JSON_ENTITY.matricula = $('#formulario3').find('input[name="matricula"]').val();
				    G_JSON_ENTITY.nombresocio = $('#formulario3').find('input[name="nombresocio"]').val();
				    G_JSON_ENTITY.fechaemision = $('#formulario3').find('input[name="fechaemision"]').val();
				    G_JSON_ENTITY.fechaexpiracion = $('#formulario3').find('input[name="fechaexpiracion"]').val();
				    G_JSON_ENTITY.estado = $('#formulario3').find('input[name="estado"]').val();

// 			    	G_JSON_PERSONA_ENTITY.id=null;
			    	G_JSON_PERSONA_ENTITY.ci=$('#formulario3').find('input[name="ci"]').val();;
			    	G_JSON_PERSONA_ENTITY.nombrecompleto=null;
			    	G_JSON_PERSONA_ENTITY.email=null;
			    	G_JSON_PERSONA_ENTITY.celular=$('#formulario3').find('input[name="celular"]').val();
			    	G_JSON_PERSONA_ENTITY.estado=1
			    	
			    	G_JSON_ENTITY.persona = G_JSON_PERSONA_ENTITY;

			        // Agregar las empresas obtenidas al JSON
			        G_JSON_ENTITY.catalogos = null;
			    	
				    return G_JSON_ENTITY;
				}
                
             	async function obtenerJsonEntity() {
				    try {
				        let jsonEntity = await construirJsonEntity();
// 				        console.log("JSON MODIFICAR PRE:",jsonEntity)
				        return JSON.stringify(jsonEntity);
				    } catch (error) {
				        console.error('Error al construir el JSON de compra entity:', error);
				        return null;
				    }
				}
                
				obtenerJsonEntity().then(json => {
				    if (json !== null) {
//        					console.log("JSON MODIFICAR SERVER EMP",json)
               
	        	        $.ajax({
		              	   	url:nameEntity+"/modificarqr/"+GID,
		              	    type: "POST",
							'contentType': "application/json",
							'data': json,
		              	    'dataType': 'json',
		              	  	async: false,
		                     success:function(res){
		                    	 objectMod=res
		                         $('#formulario3')[0].reset();
		                         $('.modal').modal('hide')
		                          Swal.fire({
		                             title:"Registrado",
		                             text:"Se ha modificado el QR del socio seleccionado",
		                             icon:"success",
		                             timer:700,   
		                             showConfirmButton: false 
		                         });  
		                         $('#table').dataTable().fnDraw('page');
		                     },
		                     error:function(err){
		                    	 console.log(err)
	           	 				Swal.fire({
							    	icon:'error',
							    	title:"Cancelado",
			                        text:"No se realizo la operacion, comunicarse con el administrador del Sistema, Gracias",
			                        timer:2000,
			                        showCancelButton:false,
			                     	showConfirmButton:false
							    })
		                     }
		                	
		                 })
				        
				        
				    } else {
				        console.error('Error al obtener el JSON de compra entity');
				    }
				});
                
			}
				
			
			function updateStatusEntity(status) {
				console.log("GID:",GID," STATUS:",status)
				
				
				const swalWithBootstrapButtons = Swal.mixin({
				  customClass: {
				    confirmButton: 'btn btn-success',
				    cancelButton: 'btn btn-danger'
				  },
				  buttonsStyling: false
				})
				
				swalWithBootstrapButtons.fire({
				  title: "¬øEstas Seguro de continuar?",   
	              text: "Se registrara en el Sistema",   
				  icon: 'warning',
				  showCancelButton: true,
				  confirmButtonText: 'Si, Continuar!',
				  cancelButtonText: 'No, Cancelar!',
				  reverseButtons: true
				}).then((result) => {
				  if (result.isConfirmed) {
	       				var data= {
       	          	    	id:GID,
       	          	    	codigo:"",
       	          	    	nombre:"",
       	          	    	estado:status
       	          	    }
	       				console.log(JSON.stringify(data))
       	                $.ajax({
       	              	   	url:nameEntity+"/updateStatus",
       	              	    type: "POST",


       		                contentType: "application/json",
       		                dataType:'json',
       						'data': JSON.stringify(data),
       	 
       	                     success:function(res){
       							console.log('registrado',res)
//        							removeRowLastTable(res.id)
       							$('#table').dataTable().fnDraw('page');
       	                         Swal.fire({
       	                             title:"Completado",
       	                             text:"Se ha completado la transaccion exitosamente",
       	                             icon:"success",
       	                             timer:700,   
       	                             showConfirmButton: false 
       	                         });
       						   		
       	                     }
       	                 })
	       	                 $('.modal').modal('hide')  
					  
	
				  } else if (
				    /* Read more about handling dismissals below */
				    result.dismiss === Swal.DismissReason.cancel
				  ) {
					    swalWithBootstrapButtons.fire({
					    	icon:'error',
					    	title:"Cancelado",
	                        text:"Se ha cancelado operacion",
	                        timer:800,
	                        showCancelButton:false,
	                     	showConfirmButton:false
					    })
				  }
				})
	
				

			}
// 	    $('#formulario').formValidation({

//        	})
//         .on('success.form.fv', function(e){
//             e.preventDefault();
//             var $form = $(e.target);

		$("#formulario3").submit(function (event) {
            const swalWithBootstrapButtons = Swal.mixin({
            	  customClass: {
            	    confirmButton: 'btn btn-success',
            	    cancelButton: 'btn btn-danger'
            	  },
            	  buttonsStyling: false
            	})
            
			swalWithBootstrapButtons.fire({
				  title: "¬øEstas Seguro de Renovar el QR de este socio?",   
	              text: "Se modficara el c√≥digo QR del socio seleccionado",   
				  icon: 'warning',
				  showCancelButton: true,
				  confirmButtonText: 'Si, Continuar!',
				  cancelButtonText: 'No, Cancelar!',
				  reverseButtons: true
				}).then((result) => {
// 					console.log("GOPCION:",GOPCION)
				  if (result.isConfirmed) {
	               	   if(GOPCION=="QR"){
	               			updateQRSocio()
	            	   }
	               	
				  } else if (
				    result.dismiss === Swal.DismissReason.cancel
				  ) {
				    swalWithBootstrapButtons.fire({
				    	icon:'error',
				    	title:"Cancelado",
                        text:"Se ha cancelado operacion",
                        timer:700,
                        showCancelButton:false,
                     	showConfirmButton:false
				    })
				  }
				  $('.modal').modal('hide')  
				})
            
			event.preventDefault();
		});

		$("#formulario2").submit(function (event) {
            const swalWithBootstrapButtons = Swal.mixin({
            	  customClass: {
            	    confirmButton: 'btn btn-success',
            	    cancelButton: 'btn btn-danger'
            	  },
            	  buttonsStyling: false
            	})
            
			swalWithBootstrapButtons.fire({
				  title: "¬øEstas Seguro de continuar?",   
	              text: "Se registrara en el Sistema",   
				  icon: 'warning',
				  showCancelButton: true,
				  confirmButtonText: 'Si, Continuar!',
				  cancelButtonText: 'No, Cancelar!',
				  reverseButtons: true
				}).then((result) => {
// 					console.log("GOPCION:",GOPCION)
				  if (result.isConfirmed) {
	               	   if(GOPCION=="PLANTILLA"){
	               			updatePlantillaCurso1()
	            	   }
	               	
				  } else if (
				    result.dismiss === Swal.DismissReason.cancel
				  ) {
				    swalWithBootstrapButtons.fire({
				    	icon:'error',
				    	title:"Cancelado",
                        text:"Se ha cancelado operacion",
                        timer:700,
                        showCancelButton:false,
                     	showConfirmButton:false
				    })
				  }
				  $('.modal').modal('hide')  
				})
            
			event.preventDefault();
		});

		$("#formulario").submit(function (event) {
            const swalWithBootstrapButtons = Swal.mixin({
            	  customClass: {
            	    confirmButton: 'btn btn-success',
            	    cancelButton: 'btn btn-danger'
            	  },
            	  buttonsStyling: false
            	})
            
			swalWithBootstrapButtons.fire({
				  title: "¬øEstas Seguro de continuar?",   
	              text: "Se registrara en el Sistema",   
				  icon: 'warning',
				  showCancelButton: true,
				  confirmButtonText: 'Si, Continuar!',
				  cancelButtonText: 'No, Cancelar!',
				  reverseButtons: true
				}).then((result) => {
// 					console.log("GOPCION:",GOPCION)
				  if (result.isConfirmed) {
	               	   if(GOPCION=="ADD"){
	            		   saveEntityForm1()
	            	   }else{
	            		   updateEntityForm1()
	            	   }
	               	
				  } else if (
				    result.dismiss === Swal.DismissReason.cancel
				  ) {
				    swalWithBootstrapButtons.fire({
				    	icon:'error',
				    	title:"Cancelado",
                        text:"Se ha cancelado operacion",
                        timer:700,
                        showCancelButton:false,
                     	showConfirmButton:false
				    })
				  }
				  $('.modal').modal('hide')  
				})
            
				 event.preventDefault();
		 	 });
//         })




		
		function resetSelectCategoria() {
			const select_det = document.querySelector('select[name="scategoriacurso"]'); // Buscar el <select> una vez
            if (!select_det) {
                console.error('No se encontr√≥ el <select> con el nombre "scategoriacurso".');
                return;
            }

            // Limpiar opciones previas si es necesario
            select_det.innerHTML = '';
            const option0 = document.createElement('option');
            option0.value = "";
            option0.textContent = "Todas las categorias";
            select_det.appendChild(option0);
		}
		
		$("#seventocurso").on('change',function(){
			var idevento=$(this).val();
			console.log("idevento:",idevento)
			if(idevento==""){
				console.log("entro evento blanco")
					GID_EVENTO_DET_S=-2;
					GID_EVENTO_DET=-1;
					GID_CATEGORIA_DET=-1;

				resetSelectCategoria();
                
// 				mostrarCategoriasDetalle();
			}else{
				GID_EVENTO_DET=idevento;
				GID_EVENTO_DET_S=idevento;
				mostrarCategoriasDetalle();
			}
// 			GID_EVENTO_DET=idevento;
// 			mostrarCategoriasDetalle();
// 			GID_EVENTO_DET=-1
			$('#table_certificados').dataTable().fnDraw('page');
		})
		
		$("#scategoriacurso").on('change',function(){
			var idcat=$(this).val();
			console.log("idcat:",idcat)
			
			if(idcat==""){
				console.log("entro evento blanco")

// 				GID_EVENTO_DET_S=-2;
				GID_CATEGORIA_DET=-1;


			}else{
				GID_CATEGORIA_DET=idcat;
			}
			
// 			GID_CATEGORIA_DET=idcat;
// 			mostrarCategoriasDetalle();
			$('#table_certificados').dataTable().fnDraw('page');
		})
		
		
		

		
		function mostrarEventosDetalle() {
			
		
		}
		

		iniciando_table_certificados();
		function iniciando_table_certificados(){
			
			console.log("listando certifados")
			DTtable_INSCRITO=$('#table').DataTable({
	            "oLanguage": {
	                     "sUrl": "../js/Spanish.lang"

	            }
	        ,
	            "dom":'lrt<button>ip',
// 	            "dom": '<"top"i>rt<"bottom"flp><"clear">',
// 	            "pageLength":2,
	             responsive:true,
	            "processing": true,
	            "serverSide": true, 
	            
	            "ajax": {
	            "type": "GET",
	              "url": nameEntity_INSCRITO+""+"/listarbyCurso",
	          	"data": function ( d ){
	          		 	d.estado = GESTADO_INSCRITO
	                    d.idevento= GID_EVENTO_CERT
// 	                    d.anio=$('body').find('#select-anios option:selected').text();
	                    d.idanio=GID_ANIO_DET
	                    d.idcurso= GID_CURSO_CERT
	                    d.idcategoria= GID_CATEGORIA_CERT
	                    d.tipocertificado=GID_TIPOCERTIFICADO_DET
	             }
	             ,
	             "dataSrc": function(json) {
	                 // Guardar los IDs de los certificados en certificadosIds
	                 certificadosIds = json.listaidcertificados || [];  // Aseg√∫rate de que la lista de IDs est√© disponible
	                 return json.data;  // Retorna los datos para DataTable
	             }
	            }
	            ,
	            "columns": [
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" },
	                { "data": "id" }
//	                 { "data": "id" }
	      		]
	            ,
	            "createdRow":function(row,data,index){
	                console.log("DATA2:",data)
	                $('td',row).eq(0).html(data.nrofolio+""+`<input type="hidden" value="${data.id}" class="idhidden">`).addClass('text-center');
	                $('td',row).eq(1).html(data.fecharegistro);
	                $('td',row).eq(2).html(data.ci);
	                $('td',row).eq(3).html(data.nombrecompleto);
	                $('td',row).eq(4).html(data.email);
	                $('td',row).eq(5).html(data.celular);
	                $('td',row).eq(6).html(data.ciudad);
	                $('td',row).eq(7).html(data.sucursal);
	                $('td',row).eq(8).html(data.tipocertificado);
	                let s_certificado_enviado=""
	                if (data.tipocertificado=="DIGITAL") {
	                	if (data.certificadoenviado==1) {
	                		$('td',row).eq(9).html('<span class="badge rounded-pill badge-success">Enviado</span>');
						} else {
							$('td',row).eq(9).html('<span class="badge rounded-pill badge-warning">Pendiente</span>');
						}
	                	
					}else{
						$('td',row).eq(9).html("");
					}
	                
	                $('td',row).eq(10).html(data.nombrecurso);
// 	                $('td',row).eq(5).html('SI').addClass('text-center');
	                
	                // Aqu√≠ agregar√°s el checkbox
	                $('td', row).eq(11).html(`
	                    <input type="checkbox" class="row-checkbox" data-id="${data.id}">
	                `).addClass('text-center');

	            } 
	            ,
	            "drawCallback":function(settings){
	            	$('#js_filtro').on( 'keyup', function () {
	            		DTtable_INSCRITO.search(this.value ).draw();
	                }) 
				        // Sincronizar los checkboxes con los certificadosIds
			        if (isGlobalSelectAll) {
			            // Si est√° activada la selecci√≥n global, marcar todos los checkboxes visibles
			            $('#table tbody .row-checkbox').each(function() {
			                const checkboxId = $(this).data('id');
			
			                // Agregar los nuevos IDs al array si no est√°n ya
			                if (!selectedIds.includes(checkboxId)) {
			                    selectedIds.push(checkboxId);
			                }
			
			                $(this).prop('checked', true); // Marcar el checkbox
			            });
			        } else {
			            // Si no est√° en modo selecci√≥n global, desmarcar los checkboxes visibles
			            $('#table tbody .row-checkbox').prop('checked', false);
			
			            // Sincronizar el estado de los checkboxes visibles con el array selectedIds
			            updateCheckboxState();
			        }
	            	
	            
	            }
	        });
		}     
			
			//PARA LOS CHECKBOX
			
			var selectedIds = []; // Array para almacenar los IDs seleccionados
			var isGlobalSelectAll = false;
			var isAllSelected = false; // Indica si todas las filas est√°n seleccionadas
			var certificadosIds = [];  // Array para almacenar los IDs de los certificados
			// Funci√≥n para manejar el estado de los checkboxes
			function updateCheckboxState() {
			    $('#table tbody .row-checkbox').each(function () {
			        var checkboxId = $(this).data('id');
			        // Si el ID est√° en selectedIds, marcar el checkbox
			        if (selectedIds.includes(checkboxId)) {
			            $(this).prop('checked', true);
			        } else {
			            $(this).prop('checked', false);
			        }
			    });
			}


			// Manejar el cambio de estado de los checkboxes individuales
			$('#table').on('change', '.row-checkbox', function() {
			    const checkboxId = $(this).data('id');
			    
			    if ($(this).prop('checked')) {
			        // Si est√° marcado, agregar el ID al array selectedIds
			        if (!selectedIds.includes(checkboxId)) {
			            selectedIds.push(checkboxId);
			        }
			    } else {
			        // Si est√° desmarcado, quitar el ID del array selectedIds
			        const index = selectedIds.indexOf(checkboxId);
			        if (index > -1) {
			            selectedIds.splice(index, 1);
			        }
			        
			        // Desactivar el estado global de selecci√≥n
			        isAllSelected = false;
			        isGlobalSelectAll = false;

			        // Cambiar el texto del bot√≥n (opcional)
			        $('#btn_select_all_global').text('Seleccionar todos');
			    }

			    console.log("IDs seleccionados actualmente:", selectedIds);
			});




			// Obtener los IDs seleccionados cuando se hace clic en el bot√≥n
			$('#btn_obtener_seleccionados').on('click', function() {
			    console.log("IDs seleccionados:", selectedIds);

			    // Aqu√≠ puedes hacer lo que necesites con los IDs seleccionados
			});
			// Mostrar selectedIds cuando cambie la p√°gina
			DTtable_INSCRITO.on('page', function() {
			    console.log("Selected IDs despu√©s de cambio de p√°gina:", selectedIds);


			});
			
			
			$('#table tbody').on( 'click dblclick', 'tr', function (e) {
	
				var row = $(this).closest('tr');
				if(e.type=='dblclick'){//mostramos el modal para el CRUD

				}
				

				
// 				console.log('row:',row);
				var idr = parseInt(row.find('.idhidden').val(), 10);
// 				console.log('idr:',idr);
          		 if ( $(this).hasClass('selected') ) {
                       $(this).removeClass('selected');
                       GDATO_INSCRITO=""
                  }
                  else {
                      $('#table tr.selected').removeClass('selected');
                      $(this).addClass('selected');
                      
                      GDATO_INSCRITO=$(this).find("td:eq(0)").text();
//                    console.log('GDATO_INSCRITO:',GDATO_INSCRITO);
                      
                  }

          		GID_INSCRITO=idr
 				console.log('GID_INSCRITO_CERTIFICADO:',GID_INSCRITO);
			})
			
	console.log("Certificados marcados: ", selectedIds);		
	/*		
	function funcVerCertificadosMarcados() {
	    // Verificar si el array selectedIds est√° vac√≠o
	    if (selectedIds.length === 0) {
	        // Si no hay ning√∫n ID seleccionado, mostrar una alerta
	        alert("No se han seleccionado certificados.");
	    } else {
	        // Verificar si realmente hay checkboxes marcados en la tabla
	        var checkedCount = $('#table .row-checkbox:checked').length;
	
	        // Si no hay checkboxes marcados, mostrar la alerta
	        if (checkedCount === 0) {
	            alert("No se ha seleccionado ning√∫n certificado.");
	        } else {
	            // Si hay checkboxes marcados, proceder con la l√≥gica deseada
	            console.log("Certificados marcados: ", selectedIds);
	            // Aqu√≠ podr√≠as agregar el c√≥digo para mostrar los certificados
	            
	            var urlCertificados = nameEntity_INSCRITO + "/Imprimir_certificados/";

	            fetch(urlCertificados, {
	                method: 'POST',
	                headers: { 
	                    'Content-Type': 'application/json'
	                },
	                body: JSON.stringify({ ids: selectedIds })  // Enviar los IDs como JSON
	            })
	            .then(response => response.blob())
	            .then(blob => { 
	                const url = window.URL.createObjectURL(blob);  
	                
	         
	                $("#frameReportes").attr("src", url);
	                
	        
	                $("#reportes").modal('show');
	            })
	            .catch(error => {
	                console.error("Error al generar los certificados:", error);
	            });

	        }
	    }
	}*/
	
	
		function funcVerCertificadosMarcados() {
		    // Verificar si el array selectedIds est√° vac√≠o
		    if (selectedIds.length === 0) {
		        alert("No se han seleccionado certificados.");
		        return;
		    }
	
		    // Verificar si realmente hay checkboxes marcados en la tabla
		    var checkedCount = $('#table .row-checkbox:checked').length;
		    if (checkedCount === 0) {
		        alert("No se ha seleccionado ning√∫n certificado.");
		        return;
		    }
	
		    // Mostrar el modal de carga antes de iniciar la solicitud
		    $("#cargando").modal("show");
	
		    // Iniciar medici√≥n del tiempo
		    var start_time = new Date().getTime();
	
		    // Construir la URL del backend
		    var urlCertificados = nameEntity_INSCRITO + "/Imprimir_certificados/";
	
		    // Enviar la lista de IDs al backend
		    fetch(urlCertificados, {
		        method: 'POST',
		        headers: { 'Content-Type': 'application/json' },
		        body: JSON.stringify({ ids: selectedIds })  
		    })
		    .then(response => response.blob())
		    .then(blob => { 
		        // Crear una URL para el archivo PDF
		        const url = window.URL.createObjectURL(blob);  
	
		        // Obtener referencia al iframe
		        var frame = $("#frameReportes");
	
		        // Configurar evento para cerrar el modal de carga despu√©s de cargar el PDF
		        frame.off("load").on("load", function () {
		            var elapsed_time = Math.round((new Date().getTime() - start_time) / 1000);
		            console.log("Tiempo de carga del reporte:", elapsed_time, "segundos");
	
		            // Ocultar el modal de carga
		            $("#cargando").modal("hide");
	
		            // Mostrar el modal de reportes
		            $("#reportes").modal("show");
		        });
	
		        // Asignar la URL al iframe (esto iniciar√° la carga del PDF)
		        frame.attr("src", url);
		    })
		    .catch(error => {
		        console.error("Error al generar los certificados:", error);
		        $("#cargando").modal("hide");
		        alert("Hubo un error al generar los certificados.");
		    });
		}


			// Array para almacenar los IDs seleccionados
// 			var selectedIds = [];

// Verificar si la tabla est√° vac√≠a
function checkTableEmpty() {
    if ($('#table_certificados tbody tr').length === 0) {
        alert("La tabla de certificados est√° vac√≠a.");
        return true; // La tabla est√° vac√≠a
    }
    return false; // La tabla no est√° vac√≠a
}


$('#btn_select_all').on('click', function () {
    // Verificar si ya se seleccionaron todas las filas visibles de la p√°gina actual
    const isPageSelected = $('#table tbody .row-checkbox:checked').length === $('#table tbody .row-checkbox').length;

    if (isPageSelected) {
        // Si ya est√°n seleccionadas todas, deseleccionar todas las filas visibles de la p√°gina actual
        $('#table tbody .row-checkbox').prop('checked', false);

        // Eliminar las filas de la p√°gina actual de selectedIds
        DTtable_INSCRITO.rows({ page: 'current' }).every(function () {
            const data = this.data();
            const checkboxId = data.id;

            // Eliminar del array selectedIds si el ID est√° presente
            const index = selectedIds.indexOf(checkboxId);
            if (index > -1) {
                selectedIds.splice(index, 1);
            }
        });

        // Cambiar el texto del bot√≥n a "Seleccionar todos"
        $(this).text('Seleccionar todos de pagina actual');
        console.log("Se han deseleccionado las filas visibles.. IDs seleccionados:", selectedIds);
//         console.log("Se han deseleccionado las filas visibles.");
    } else {
        // Si no est√°n seleccionadas todas, seleccionar todas las filas visibles de la p√°gina actual
        DTtable_INSCRITO.rows({ page: 'current' }).every(function () {
            const data = this.data();
            const checkboxId = data.id;

            // Agregar al array selectedIds si no est√° ya presente
            if (!selectedIds.includes(checkboxId)) {
                selectedIds.push(checkboxId);
            }
        });

        // Marcar todos los checkboxes visibles en la p√°gina actual
        $('#table tbody .row-checkbox').prop('checked', true);

        // Cambiar el texto del bot√≥n a "Deseleccionar todos"
        $(this).text('Deseleccionar todos de pagina actual');


        console.log("Se han seleccionado todas las filas visibles.. IDs seleccionados:", selectedIds);
    }
    isGlobalSelectAll = false;
});

//M√©todo de selecci√≥n global
$('#btn_select_all_global').on('click', function () {
    if (isAllSelected) {
        // Deseleccionar todos
        isAllSelected = false; // Cambiar el estado
        isGlobalSelectAll = false; // Desactivar selecci√≥n global

        // Vaciar el array de IDs seleccionados solo si es necesario
        selectedIds = [];

        // Deseleccionar todas las filas visibles
        $('#table tbody .row-checkbox').prop('checked', false);

        // Cambiar el texto del bot√≥n
        $(this).text('Seleccionar todos');

        // Asegurar que el bot√≥n de la p√°gina actual tambi√©n se actualice
        $('#btn_select_all').text('Seleccionar todos de pagina actual');


        console.log("Se han deseleccionado globalmente todas las filas. IDs seleccionados:", selectedIds);
    } else {
        // Seleccionar todos
        isAllSelected = true; // Cambiar el estado
        isGlobalSelectAll = true; // Activar selecci√≥n global

        // Reiniciar el array de selectedIds solo para las filas globales (sin eliminar las locales)
        selectedIds = [];

        // Obtener todos los IDs de todas las filas (incluidas las no visibles)
        certificadosIds.forEach(function(certId) {
            // Agregar los IDs al array sin duplicados
            if (!selectedIds.includes(certId)) {
                selectedIds.push(certId.id);
            }
        });

        // Marcar visualmente todas las filas visibles de la p√°gina actual
        $('#table tbody .row-checkbox').prop('checked', true);

        // Cambiar el texto del bot√≥n
        $(this).text('Deseleccionar todos');

        // Asegurar que el bot√≥n de la p√°gina actual tambi√©n se actualice
        $('#btn_select_all').text('Deseleccionar todos de pagina actual');

        console.log("Se han seleccionado globalmente todas las filas. IDs seleccionados:", selectedIds);
    }
});



	




			function funcVerCertificado() {
			    if (GDATO_INSCRITO != "") {
			        // Mostrar el modal de carga antes de iniciar la solicitud
			        $("#cargando").modal("show");
			
			        // Medir tiempo de carga
			        var start_time = new Date().getTime();
			
			        // Construir la URL del reporte
			        var urlCertificado = nameEntity_INSCRITO + "/Imprimir_d1/" + GID_INSCRITO;
			
			        // Obtener referencia al iframe
			        var frame = $("#frameReportes");
			
			        // Configurar evento para cerrar el modal cuando el iframe cargue completamente
			        frame.off("load").on("load", function () {
			            // Calcular el tiempo de carga
			            var elapsed_time = Math.round((new Date().getTime() - start_time) / 1000);
			            console.log("Tiempo de carga del reporte:", elapsed_time, "segundos");
			
			            // Ocultar el modal de carga
			            $("#cargando").modal("hide");
			
			            // Mostrar el modal de reportes
			            $("#reportes").modal("show");
			        });
			
			        // Asignar la URL al iframe (esto iniciar√° la carga del reporte)
			        frame.attr("src", urlCertificado);
			    } else {
			        alert("¬°SELECCIONE UN CURSO PARA MOSTRAR EL CERTIFICADO!");
			    }
			}
			
			function funcEnviarCertificado() {
			    if (GDATO_INSCRITO != "") {
			        // Mostrar el modal de carga antes de iniciar la solicitud
			        $("#cargando").modal("show");
			
			        // Medir tiempo de carga
			        var start_time = new Date().getTime();
			
				    $.ajax({
				        url: nameEntity_CORREO + "/enviarcertificado",
				        type: "POST",
// 				        contentType: false,
// 				        processData: false,
				        data: {
				        	idcertificado:GID_INSCRITO
				        }, 
				        success: function (res) {
				            // Medir el tiempo de respuesta
				            var elapsed_time = Math.round((new Date().getTime() - start_time) / 1000);
				            console.log("Tiempo de carga del servidor:", elapsed_time, "segundos");

				            // Ocultar el modal de carga
				            $("#cargando").modal("hide");

				            console.log("Registrado:", res);
				            Swal.fire({
				                title: "Enviado",
				                text: "Se ha enviando exitosamente el certificado",
				                icon: "success",
				                timer: 500,
				                showConfirmButton: false
				            }).then(() => {
				                // Mostrar mensaje de registro y recargar despu√©s de unos segundos
// 				                document.getElementById("registrado").classList.add("mostrar");
// 				                setTimeout(() => {
// 				                    location.reload();
// 				                }, 3000); // 7 segundos
				            });
				        },
				        error: function (err) {
				            console.log(err);

				            // Ocultar el modal de carga en caso de error
				            $("#cargando").modal("hide");

				            Swal.fire({
				                icon: 'error',
				                title: "Cancelado",
				                text: "No se realiz√≥ la operaci√≥n, comun√≠quese con el administrador del sistema. Gracias",
				                timer: 500,
				                showCancelButton: false,
				                showConfirmButton: false
				            });
				        }
				    });
			    } else {
			        alert("¬°SELECCIONE UN ESTUDIANTE PARA ENVIAR EL CERTIFICADO DIGITAL!");
			    }
			}
			
			function funcEnviarCertificadosMarcados() {
			    // Verificar si hay certificados seleccionados
			    if (selectedIds.length === 0) {
			        alert("No se han seleccionado certificados.");
			        return;
			    }

			    var checkedCount = $('#table .row-checkbox:checked').length;
			    if (checkedCount === 0) {
			        alert("No se ha seleccionado ning√∫n certificado.");
			        return;
			    }

			    // Mostrar el modal de carga
			    $("#cargando").modal("show");

			    // Iniciar medici√≥n del tiempo
			    var start_time = new Date().getTime();

			    // Construir la URL del backend
			    var urlCertificados = nameEntity_CORREO + "/enviar_certificados";

			    $.ajax({
			        url: urlCertificados,
			        type: "POST",
			        contentType: "application/json",  // üí° Especificamos que enviamos JSON
			        data: JSON.stringify({ ids: selectedIds }),  // üí° Convertimos los datos a JSON
			        success: function (res) {
			            // Medir el tiempo de respuesta
			            var elapsed_time = Math.round((new Date().getTime() - start_time) / 1000);
			            console.log("Tiempo de carga del servidor:", elapsed_time, "segundos");

			            // Ocultar el modal de carga
			            $("#cargando").modal("hide");

			            console.log("Registrado:", res);
			            Swal.fire({
			                title: "Enviado",
			                text: "Se ha enviando exitosamente los certificados",
			                icon: "success",
			                timer: 500,
			                showConfirmButton: false
			            });
			        },
			        error: function (err) {
			            console.log(err);

			            // Ocultar el modal de carga en caso de error
			            $("#cargando").modal("hide");

			            Swal.fire({
			                icon: 'error',
			                title: "Cancelado",
			                text: "No se realiz√≥ la operaci√≥n, comun√≠quese con el administrador del sistema. Gracias",
			                timer: 500,
			                showCancelButton: false,
			                showConfirmButton: false
			            });
			        }
			    });
			}
			
			//informacion de certificado

			function funcVerComprobante() {
			    if (GDATO_INSCRITO !== "") {
			    	$('#formulario4')[0].reset();
			    	console.log("GID_INSCRITO:",GID_INSCRITO)
			    	$.get(nameEntity0dt + '/getCertificiado/' + GID_INSCRITO, function (data) {
			    		console.log("certificado:",data)
			    		mostrarEventoCertificado(data);
			    		
			    		mostrarDatosCertificadoInscrito(data);
			    	})
			    	 $('#modalInscritoComprobante').modal('show');
			    } else {
			        alert("¬°SELECCIONE UN CURSO PARA MOSTRAR EL COMPROBANTE!");
			    }
			}

			function mostrarDatosCertificadoInscrito(cert) {
					//aqui ponemos los datos del estudiante si se registro como participante
				var participante=cert.participante
				var persona=cert.participante.persona
				console.log("persona:",persona)
				console.log("participante:",participante)

				
				if (participante!=null) {
					//********aqui cargamos la imagen del participante, si en caso tiene registrado
					$('#formulario4').find('input[name="archivoimgparticipante"]').val('')
					$('#formulario4').find('input[name="archivoimgparticipante"]').fileinput('destroy');
					
					
					
					if (participante.imagen!=null) {
			    		//********aqui cargamos la imagen del participante, si en caso tiene registrado
			    		$('#formulario4').find('input[name="archivoimgparticipante"]').val('')
						$('#formulario4').find('input[name="archivoimgparticipante"]').fileinput('destroy');
			    		
			    		var xhr1 = new XMLHttpRequest();
			  			let nombrelogodefecto = participante.imagen; // Nombre del archivo que deseas cargar
//			           			console.log("nombrelogodefecto:", nombrelogodefecto);
			  			xhr1.open("GET", nameEntityPdt + "/logourl/" + nombrelogodefecto, true);
			  			xhr1.responseType = 'blob'; // Cambia el tipo de respuesta a blob
			    		
					    xhr1.onload = function() {
					        var blob = xhr1.response;
					        var file = new File([blob], nombrelogodefecto);
					        var inputFile = document.getElementById('archivoimgparticipante');
					        var fileList = new DataTransfer();
					        fileList.items.add(file);
					        inputFile.files = fileList.files;
					        inputFile.title = nombrelogodefecto;
					    };
					    xhr1.send();
						$('#formulario4').find('input[name="archivoimgparticipante"]').fileinput({
						  	language:'es',
						    showUpload: false, // Ocultar el bot√É¬≥n de carga
						    showRemove: true, 
			                showCaption: true,
			                showCancel: true,
			                allowedFileExtensions: ['jpg', 'jpeg', 'png', 'gif'], // Solo permitir im√°genes
			                elErrorContainer: '#errorBlock', // (Opcional) Contenedor para mostrar mensajes de error
//				 		  	 ,maxImageWidth: 300 // Ancho m√Ø¬ø¬Ωximo de la imagen previa en p√Ø¬ø¬Ωxeles
//				 		     ,maxImageHeight: 300 
						     	initialPreview: [
				                `<img src="${nameEntityPdt}/logourl/${nombrelogodefecto}" class="file-preview-image" alt="Vista previa" title="${nombrelogodefecto}">`
				            ],
				            initialPreviewConfig: [
				                {
				                    caption: nombrelogodefecto, // Texto que aparecer√° debajo de la imagen en la vista previa
				                    width: '200px', // Ancho de la imagen en la vista previa
				                    url: '/', // URL opcional para el enlace de eliminaci√≥n (en este caso, se establece como '#')
				                    key: 1 // Clave √∫nica para el elemento de vista previa
				                }
				            ],
				            fileActionSettings: {
				                removeIcon: '', // Vaciar el icono del bot√≥n de eliminar
				                removeClass: 'hide-remove', // Aplicar una clase para ocultar el bot√≥n de eliminar
				                removeTitle: '', // Vaciar el t√≠tulo del bot√≥n de eliminar
				            },
				            initialCaption: nombrelogodefecto // Para poner el nombre en la caja del file

						});
			  			//*********************fin de agregar logo
					}else{
						logouserdefault()
					}
				
				
				}else{
					logouserdefault()
				}
				
					
				$('#formulario4').find('input[name="idper"]').val(persona.id);
				$('#formulario4').find('input[name="idpartact"]').val(participante.id);
				$('#formulario4').find('input[name="idpart"]').val(participante.id);
				$('#formulario4').find('input[name="ci"]').val(persona.ci);
					document.querySelectorAll("#exp > option").forEach(function(option) {
					    if (option.value == persona.exp) {
					        option.selected = true;
					    }
					});
					$('#formulario4').find('input[name="nombres"]').val(persona.nombres);
					$('#formulario4').find('input[name="apellidos"]').val(persona.apellidos);
					
					if (persona.genero != null) {
					    const generoSelect = document.querySelector('#formulario4 select[name="genero"]');
					    if (generoSelect) {
					        generoSelect.querySelectorAll('option').forEach(function(option) {
				        	 	if (option.value == persona.genero) {
							        option.selected = true;
							    }
					        });
					    }
					}
					
				
					if(persona.fechanacimiento!=null){
						$('#formulario4').find('input[name="fechanacimiento"]').val(persona.fechanacimiento);
					}
					if(persona.edad!=null){
						$('#formulario4').find('input[name="edad"]').val(persona.edad);
					}
					$('#formulario4').find('input[name="celular"]').val(persona.celular);
					//grado academico
					// grado acad√©mico
					if (participante.gradoacademico != null) {
					    const gradoSelect = document.querySelector("#formulario4 select[name='gradoacademico']");
					    if (gradoSelect) {
					        gradoSelect.querySelectorAll("option").forEach(function(option) {
					            if (option.value == participante.gradoacademico.id) {
					                option.selected = true;
					            }
					        });
					    }
					}

					// profesi√≥n
					if (participante.profesion != null) {
					    const profesionSelect = document.querySelector("#formulario4 select[name='profesion']");
					    if (profesionSelect) {
					        profesionSelect.querySelectorAll("option").forEach(function(option) {
					            if (option.value == participante.profesion.id) {
					                option.selected = true;
					            }
					        });
					    }
					}

					
					$('#formulario4').find('input[name="email"]').val(persona.email);
					
					//ciudad
					const departamentoSelect = document.querySelector("#formulario4 select[name='departamento']");
					if (departamentoSelect && participante.departamento != null) {
					    departamentoSelect.querySelectorAll("option").forEach(function(option) {
					        if (option.value == participante.departamento.id) {
					            option.selected = true;
					        }
					    });
					}

					
					if (participante.provincia != null) {
					    var provinciaSeleccionada = participante.provincia.id;
					    $.get(nameEntity4dt + '/provincias/' + participante.departamento.id, function(provincias) {
					        let $provincia = $("#formulario4 #provincia");
					        $provincia.empty().append('<option value="">Seleccione una provincia</option>');
					        provincias.forEach(function(provincia) {
					            let selected = provincia.id === provinciaSeleccionada ? 'selected' : '';
					            $provincia.append(`<option value="${provincia.id}" ${selected}>${provincia.nombre}</option>`);
					        });
					    });
					} else {
					    $("#formulario4 #provincia").empty().append('<option value="">Seleccionar</option>');
					}
					
//			 		if(participante.localidad!=null){
//			 			$('#formulario4').find('input[name="localidad"]').val(participante.localidad);
//			 		}
//			 		$('#formulario4').find('textarea[name="direccion"]').val(persona.direccion);
					if (cert.tipocertificado != null) {
					    const generoSelect = document.querySelector('#formulario4 select[name="tipocertificado"]');
					    if (generoSelect) {
					        generoSelect.querySelectorAll('option').forEach(function(option) {
				        	 	if (option.value == cert.tipocertificado) {
							        option.selected = true;
							    }
					        });
					    }
					}
					//inscrito participante por el evento
					if (cert.evento != null && cert.participante!=null) {
					    
					    $.get(nameEntityIdt + '/getInscritoByIdEventoByIdPart/' + cert.evento.id+"/"+cert.participante.id, function(inscrito) {
					     	console.log("inscrito:",inscrito)
					     	
					     	$('#formulario4').find('input[name="idinscrito"]').val(inscrito.id);
					     	$('#formulario4').find('input[name="inscrito"]').val(inscrito.id);
					     	
					     	if (inscrito.imagen!=null) {
					    		//********aqui cargamos la imagen del participante, si en caso tiene registrado
					    		$('#formulario4').find('input[name="archivoimgpago"]').val('')
								$('#formulario4').find('input[name="archivoimgpago"]').fileinput('destroy');
					    		
					    		var xhr1 = new XMLHttpRequest();
					  			let nombrelogodefecto = inscrito.imagen; // Nombre del archivo que deseas cargar
					//           			console.log("nombrelogodefecto:", nombrelogodefecto);
					  			xhr1.open("GET", nameEntityIdt + "/logourl/" + nombrelogodefecto, true);
					  			xhr1.responseType = 'blob'; // Cambia el tipo de respuesta a blob
					    		
							    xhr1.onload = function() {
							        var blob = xhr1.response;
							        var file = new File([blob], nombrelogodefecto);
							        var inputFile = document.getElementById('archivoimgpago');
							        var fileList = new DataTransfer();
							        fileList.items.add(file);
							        inputFile.files = fileList.files;
							        inputFile.title = nombrelogodefecto;
							    };
							    xhr1.send();
								$('#formulario4').find('input[name="archivoimgpago"]').fileinput({
								  	language:'es',
								    showUpload: false, // Ocultar el bot√É¬≥n de carga
								    showRemove: true, 
					                showCaption: true,
					                showCancel: true,
					                allowedFileExtensions: ['jpg', 'jpeg', 'png', 'gif'], // Solo permitir im√°genes
					                elErrorContainer: '#errorBlock', // (Opcional) Contenedor para mostrar mensajes de error
					//	 		  	 ,maxImageWidth: 300 // Ancho m√Ø¬ø¬Ωximo de la imagen previa en p√Ø¬ø¬Ωxeles
					//	 		     ,maxImageHeight: 300 
								     	initialPreview: [
						                `<img src="${nameEntityIdt}/logourl/${nombrelogodefecto}" class="file-preview-image" alt="Vista previa" title="${nombrelogodefecto}">`
						            ],
						            initialPreviewConfig: [
						                {
						                    caption: nombrelogodefecto, // Texto que aparecer√° debajo de la imagen en la vista previa
						                    width: '200px', // Ancho de la imagen en la vista previa
						                    url: '/', // URL opcional para el enlace de eliminaci√≥n (en este caso, se establece como '#')
						                    key: 1 // Clave √∫nica para el elemento de vista previa
						                }
						            ],
						            fileActionSettings: {
						                removeIcon: '', // Vaciar el icono del bot√≥n de eliminar
						                removeClass: 'hide-remove', // Aplicar una clase para ocultar el bot√≥n de eliminar
						                removeTitle: '', // Vaciar el t√≠tulo del bot√≥n de eliminar
						            },
						            initialCaption: nombrelogodefecto // Para poner el nombre en la caja del file
					
								});
					  			//*********************fin de agregar logo
							}else{
								logouserdefaultPago()
							}
					     	
					    });
					}
				
			}
			function mostrarEventoCertificado(cert) {
				//cargando el evento con sus cursos respectivos
				
//			 	let codigoeventoencript=document.getElementById("codigoeventoencript").value;
//				console.log("codigoeventoencript:",codigoeventoencript)

				$.get(nameEntity5dt + '/findByCodeEncrypt/' + cert.evento.codigoevento, function (data) {
					console.log("Evento_data_by_crypt:",data);
					GID_EVENTOdt=data.id;
					$('#formulario4').find('input[name="idevento"]').val(data.id);
					
					let xcant=1;
					let xprec=data.precio;
					$('#formulario4').find('input[name="cantidad"]').val(xcant);
					$('#formulario4').find('input[name="precio"]').val(xprec);
					let xsubt= xcant*xprec;
					$('#formulario4').find('input[name="subtotal"]').val(xsubt);
					$('#formulario4').find('input[name="evento"]').val(data.id);
					
				//		const body = document.querySelector('body');
				//		const selectElement = body.querySelector('#select-anios');
				//		const isGestion = selectElement.options[selectElement.selectedIndex].textContent;
				//		const selectedValue = selectElement.value;
					$('#formulario4').find('input[name="anio"]').val(data.anio.id);
					
					
					
					
				    $('#formulario4').find('.evento_title').html(data.detalle);
				    $('#formulario4').find('.evento_f_inicio').html(data.fechainicial);
				    $('#formulario4').find('.evento_f_fin').html(data.fechafinal);
				    $('#formulario4').find('.evento_hora').html(data.hora);
				    let xmodalidad="";
				    if (data.modalidad=="p") {
				    	xmodalidad="PRESENCIAL"
					} if(data.modalidad=="sm"){
						xmodalidad="SEMI PRESENCIAL"
					}else {
						xmodalidad="VIRTUAL"
					}
					$('#formulario4').find('.evento_modalidad').html(xmodalidad);
					
				    let xpago="";
				    if (data.tipo=="p") {
				    	xpago="REQUIERE INVERSI√ìN"
					}else {
						xpago="INGRESO GRATUITO"
					}
					$('#formulario4').find('.evento_tipo').html(xpago);
					$('#formulario4').find('.evento_precio').html(data.precio);
					
				    let xcertificado="";
				    if (parseInt(data.concertificado)==1) {
				    	xcertificado="SI"
					}else {
						xcertificado="NO"
					}
				    $('#formulario4').find('.evento_certificado').html(xcertificado);
				    
				    let xevaluacion="";
				    if (parseInt(data.conevaluacion)==1) {
				    	xevaluacion="SI"
					}else {
						xevaluacion="NO"
					}
				//     $('#formulario4').find('.evento_evaluacion').html(xevaluacion);
				    
				    
				    $('#formulario4').find('.evento_lugarevento').html(data.lugarevento);
				    
				    
					//mostrando afiche del evento
					
					$('#formulario4').find('.evento_afiche_img').html('')
					$('#formulario4').find('.evento_afiche_img').html(`
				
				
							<a href="${nameEntity5dt}/afiche/${data.imagen}" th:href="@{${nameEntity5dt}/afiche/${data.imagen}}" data-fancybox="">
							<img src="${nameEntity5dt}/afiche/${data.imagen}" th:src="@{${nameEntity5dt}/afiche/${data.imagen}}" alt="" class="img-fluid img-thumbnail rounded" style="width: 100%;height: 300px;">	
						</a>
						`);
					
					
					$('#formulario4').find('.evento_form_register_link').html('')
					$('#formulario4').find('.evento_form_register_link').html(`
						<a class="evento_form_register" 
						   href="/evento/code/j2aj10jZNHNYtJ2lCHZCynULb0RilaY58ahxxBYXCjWrDZylI3oaiaVeedsS" 
						   onclick="mostrarevento(event, this.href)"> 
						   <i class="fa fa-id-card-o " aria-hidden="true"></i> 
						   <span class="evento_form_text">FORMULARIO DE REGISTRO</span>
						</a>
					
					`);
					
					$('#formulario4').find('.evento_group_what_link').html('')
					$('#formulario4').find('.evento_group_what_link').html(`
						<a class="evento_group_what" 
						   href="${data.linkgrupo}" 
						   onclick="mostrargrupowhat(event, this.href)">
						   <i class="fa fa-whatsapp" aria-hidden="true"></i> 
						   <span class="evento_what_text">GRUPO DE WHATSAPP</span>
						</a>
				
					`);
				//		$('#formulario42').find('.evento_content_cursos').html('')
					
					// Ejecutar la funci√≥n
					$('#formulario4').find('.evento_content_metodospagos').empty();
					$('#formulario4').find('.evento_metodospagos').empty();
					if (parseInt(data.metodopagosino)==1 && data.tipo=="p") {
						$('#formulario4').find('.evento_metodospagos').html(`
								
								<div class="evento_metodospagos_title" style="padding: 2px;">Metodos de Pago</div>
								<div class="evento_content_metodospagos" style="padding: 2px;"></div>
								`);
						const arraymetodospagos = data.metodopagos;
						for (let index = 0; index < arraymetodospagos.length; index++) {
							const mp = arraymetodospagos[index];
							$('#formulario4').find('.evento_content_metodospagos').append(`
								<div class="card_evento_metodopago">
									<div class="card_evento_metodopago_img">
					  					<a href="${nameEntity7dt}/logo_mp/${mp.imagen}" th:href="@{${nameEntity7dt}/logo_mp/${mp.imagen}}" data-fancybox="">
											<img src="${nameEntity7dt}/logo_mp/${mp.imagen}" th:src="@{${nameEntity7dt}/logo_mp/${mp.imagen}}" alt="" class="img-fluid img-thumbnail " style="">	
										</a>
				
					                </div>
				                </div>
							`);
						}
					}else{
						$('#formulario4').find('.evento_comprobantepago').empty();
						$('#formulario4').find('.evento_metodospagos').empty();
						
						
					}
					
					
				//		$('#formulario4').find('.evento_content_cursos').html('')
					
					// Ejecutar la funci√≥n
					renderEventDetails(data);
					
					function renderEventDetails(data) {
					    // Limpiar el contenedor antes de agregar contenido
					    $('#formulario4').find('.evento_content_cursos').empty();
				
					    // Recorrer el array de cursos de manera s√≠ncrona
					    const eventodetalle = data.eventodetalle; // Supongo que es un array
					    for (let index = 0; index < eventodetalle.length; index++) {
					        const eventocurso = eventodetalle[index];
//			 		        console.log(index);
//			 		        console.log(`${eventocurso.id}`);
				
					        let margen_arriba = "mt-1";
					        if (index === 0) {
					            margen_arriba = "";
					        }
					        let xnivel=""
					        if (eventocurso.curso.nivel=="b") {
					        	xnivel="BASICO"
							}if((eventocurso.curso.nivel=="i")){
								xnivel="INTERMEDIO"
							}else {
								xnivel="AVANZADO"
							}
							let gradoabreviaruta=eventocurso.expositor.gradoacademico.abreviatura;
							gradoabreviaruta=gradoabreviaruta.trim()
//			 				console.log("abrevia:",gradoabreviaruta)
					        let xgradoabre = "";
					        if (gradoabreviaruta!="") {
//			 		        	console.log("abre1:",gradoabreviaruta)
					        	xgradoabre = eventocurso.expositor.gradoacademico.abreviatura+".";
					        }else if( gradoabreviaruta== "" || gradoabreviaruta != " "){
					        	console.log("abre2:",gradoabreviaruta)
					        	xgradoabre=""
					        }
				
					        // Agregar contenido al DOM de forma s√≠ncrona
					        $('#formulario4').find('.evento_content_cursos').append(`
					            <div class="card_evento_curso ${margen_arriba}">
					                <div class="card_evento_curso_img_expositor">
					  					<a href="${nameEntity6dt}/logo_expositor/${eventocurso.expositor.imagen}" th:href="@{${nameEntity6dt}/logo_expositor/${eventocurso.expositor.imagen}}" data-fancybox="">
											<img src="${nameEntity6dt}/logo_expositor/${eventocurso.expositor.imagen}" th:src="@{${nameEntity6dt}/logo_expositor/${eventocurso.expositor.imagen}}" alt="" class="img-fluid img-thumbnail " style="">	
										</a>
				
					                </div>
					                <div class="card_evento_curso_contenido">
					                    <div class="row mb-1">
					                        <div class="col-md-6">
					                            <b>Categoria: </b><span class="card_evento_curso_txt_categoria">${eventocurso.categoria || "Auditoria"}</span>
					                        </div>
					                        <div class="col-md-6">
					                            <b>Nivel: </b><span class="card_evento_curso_txt_nivel">${xnivel || "B√°sico"}</span>
					                        </div>
					                    </div>
					                    <div class="row">
					                        <div class="col-md-12">
					                            <b><span class="card_evento_curso_txt_nombre_curso">${eventocurso.curso.nombrecurso || "Curso Desconocido"}</span></b>
					                        </div>
					                    </div>
										<div class="row ">
											<div class="col-md-12">
												<b>Fecha: </b><span
													class="card_evento_curso_txt_fechacurso">${eventocurso.fechacurso || "yyyy-mm-dd"}</span>
											</div>
				
										</div>
					                    <div class="row ">
					                        <div class="col-md-12">
					                            <b>De Horas: </b><span class="card_evento_curso_txt_hora_inicial">${eventocurso.horainicio || "12:00"}</span> - 
					                                            <span class="card_evento_curso_txt_hora_final">${eventocurso.horafin || "14:00"}</span>
					                        </div>
					                    </div>
										<div class="row mb-1">
											<div class="col-md-12">
												<b>En: </b><span
													class="card_evento_curso_txt_lugarcurso">${eventocurso.lugarcurso || "Lugar de Curso"}</span>
											</div>
				
										</div>
					                    <div class="row">
					                        <div class="col-md-12">
					                            <b>Por: </b><span class="card_evento_curso_txt_gradoacademico">${xgradoabre  || ""}</span> <span class="card_evento_curso_txt_expositor">${eventocurso.expositor.persona.nombres || "Nombres"} ${eventocurso.expositor.persona.apellidos || "Apellidos"}</span>
					                        </div>
					                    </div>
					                    <div class="row">
					                        <div class="col-md-12">
					                            <b><span class="card_evento_curso_txt_rubro">${eventocurso.expositor.rubro || "Rubro del expositor"}</span></b>
					                        </div>
					                    </div>
					                </div>
					            </div>
					        `);
					    }
					}
				
				}, 'json');
			}
			
			


	</script>
	
	<script type="text/javascript">
		var nameEntityIdt="../../RestInscritos"
		var nameEntityPdt="../../RestParticipantes"
		var nameEntity0dt="../../RestCertificadosCursos"
		var nameEntity1dt="../../RestGradosAcademicos"
		var nameEntity2dt="../../RestProfesiones" 
		var nameEntity3dt="../../RestDepartamentos"
		var nameEntity4dt="../../RestProvincias"
		var nameEntity5dt="../../RestEventos"
		var nameEntity6dt="../../RestExpositores"
		var nameEntity7dt="../../RestMetodosPagos"

		
		var GID_EVENTOdt=""
		
		var GESTADODET='';
		

		$('#formulario4').find('input[name="archivoimgparticipante"]').fileinput({
		  	language:'es',
		    showUpload: false, // Ocultar el bot√É¬≥n de carga
		    showRemove: true, 
	        showCaption: true,
	        showCancel: true,
	        allowedFileExtensions: ['jpg', 'jpeg', 'png', 'gif'], // Solo permitir im√°genes
	        elErrorContainer: '#errorBlock' // (Opcional) Contenedor para mostrar mensajes de error
		});
		
		
		$('#formulario4').find('input[name="archivoimgpago"]').fileinput({
		  	language:'es',
		    showUpload: false, // Ocultar el bot√É¬≥n de carga
		    showRemove: true, 
	        showCaption: true,
	        showCancel: true,
	        allowedFileExtensions: ['jpg', 'jpeg', 'png', 'gif'], // Solo permitir im√°genes
	        elErrorContainer: '#errorBlock' // (Opcional) Contenedor para mostrar mensajes de error
		});
		logouserdefault();
		
		
		function funtUpdateRowDet(){
			console.log("p√†ra actulizar:",GDATO_INSCRITO,GID_INSCRITO)
			if (GDATO_INSCRITO!="" ) {
				console.log("GESTADO_INSCRITO:",GESTADO_INSCRITO)
				updateStatusEntityDet(GESTADO_INSCRITO)//si quiero dar de baja pongo 0
			}else{
				alert("!seleccione un registro de la lista de certificados  para cambiar el estado!")
			}
		}
		
		function updateStatusEntityDet(status) {
			console.log("GID_INSCRITO:",GID_INSCRITO," STATUS:",status)
			
			
			const swalWithBootstrapButtons = Swal.mixin({
			  customClass: {
			    confirmButton: 'btn btn-success',
			    cancelButton: 'btn btn-danger'
			  },
			  buttonsStyling: false
			})
			
			swalWithBootstrapButtons.fire({
			  title: "¬øEstas Seguro de continuar?",   
              text: "El sistema actualizar√° el estado del certificado",   
			  icon: 'warning',
			  showCancelButton: true,
			  confirmButtonText: 'Si, Continuar!',
			  cancelButtonText: 'No, Cancelar!',
			  reverseButtons: true
			}).then((result) => {
			  if (result.isConfirmed) {
       				var data= {
   	          	    	id:GID_INSCRITO,
   	          	    	codigo:"",
   	          	    	nombre:"",
   	          	    	estado:status
   	          	    }
       				console.log(JSON.stringify(data))
   	                $.ajax({
   	              	   	url:nameEntity0dt+"/updateStatus",
   	              	    type: "POST",


   		                contentType: "application/json",
   		                dataType:'json',
   						'data': JSON.stringify(data),
   	 
   	                     success:function(res){
   							console.log('registrado',res)
//    							removeRowLastTable(res.id)
   							$('#table').dataTable().fnDraw('page');
   	                         Swal.fire({
   	                             title:"Completado",
   	                             text:"Se ha completado la transaccion exitosamente",
   	                             icon:"success",
   	                             timer:700,   
   	                             showConfirmButton: false 
   	                         });
   	                      	GDATO_INSCRITO=""	
   	                     }
   	             		 
   	                 })
       	                 $('.modal').modal('hide')  
				  

			  } else if (
			    /* Read more about handling dismissals below */
			    result.dismiss === Swal.DismissReason.cancel
			  ) {
				    swalWithBootstrapButtons.fire({
				    	icon:'error',
				    	title:"Cancelado",
                        text:"Se ha cancelado operacion",
                        timer:800,
                        showCancelButton:false,
                     	showConfirmButton:false
				    })
			  }
			})

			

		}
		
		function resetdataformulario(){
		    // Resetear inputs espec√≠ficos
		    $('#formulario4').find('input[name="id"], input[name="idpart"], input[name="idper"], input[name="nombres"], input[name="apellidos"], input[name="fechanacimiento"], input[name="edad"], input[name="celular"], input[name="email"], input[name="localidad"]').val('');

		    // Resetear textarea espec√≠fico
		    $('#formulario4').find('textarea[name="direccion"]').val('');

		    // Resetear selects al primer valor
		    document.querySelector("#formulario4 select[name='exp']").selectedIndex = 0;
		    document.querySelector("#formulario4 select[name='genero']").selectedIndex = 0;
		    document.querySelector("#formulario4 select[name='gradoacademico']").selectedIndex = 0;
		    document.querySelector("#formulario4 select[name='profesion']").selectedIndex = 0;
		    document.querySelector("#formulario4 select[name='departamento']").selectedIndex = 0;
		    

		}
		function resetdataformulario4(){
		    // Resetear inputs espec√≠ficos
		    $('#formulario4').find('input[name="id"], input[name="idpart"], input[name="idper"], input[name="nombres"], input[name="apellidos"], input[name="fechanacimiento"], input[name="edad"], input[name="celular"], input[name="email"], input[name="localidad"]').val('');

		    // Resetear textarea espec√≠fico
		    $('#formulario4').find('textarea[name="direccion"]').val('');

		    // Resetear selects al primer valor
		    document.querySelector("#formulario4 select[name='exp']").selectedIndex = 0;
		    document.querySelector("#formulario4 select[name='genero']").selectedIndex = 0;
		    document.querySelector("#formulario4 select[name='gradoacademico']").selectedIndex = 0;
		    document.querySelector("#formulario4 select[name='profesion']").selectedIndex = 0;
		    document.querySelector("#formulario4 select[name='departamento']").selectedIndex = 0;
		    
// 		    const select = document.querySelector("#formulario4 select[name='provincia']");
// 		    select.innerHTML = ''; // Elimina todas las opciones
// 		    const option = document.createElement("option");
// 		    option.value = '';
// 		    option.textContent = 'Seleccionar';
// 		    select.appendChild(option); // Agrega solo una opci√≥n
// 		    select.selectedIndex = 0; // Selecciona esa opci√≥n
		}
		function logouserdefault(){
			$('#formulario4').find('input[name="archivoimgparticipante"]').val('')
			$('#formulario4').find('input[name="archivoimgparticipante"]').fileinput('destroy');
			$('#formulario4').find('input[name="archivoimgparticipante"]').fileinput({
			  	language:'es',
			    showUpload: false, // Ocultar el bot√É¬≥n de carga
			    showRemove: true, 
	            showCaption: true,
	            showCancel: true,
	            allowedFileExtensions: ['jpg', 'jpeg', 'png', 'gif'], // Solo permitir im√°genes
	            elErrorContainer: '#errorBlock' // (Opcional) Contenedor para mostrar mensajes de error
			});
			
		}
		function logouserdefaultPago(){
			$('#formulario4').find('input[name="archivoimgpago"]').val('')
			$('#formulario4').find('input[name="archivoimgpago"]').fileinput('destroy');
			$('#formulario4').find('input[name="archivoimgpago"]').fileinput({
			  	language:'es',
			    showUpload: false, // Ocultar el bot√É¬≥n de carga
			    showRemove: true, 
	            showCaption: true,
	            showCancel: true,
	            allowedFileExtensions: ['jpg', 'jpeg', 'png', 'gif'], // Solo permitir im√°genes
	            elErrorContainer: '#errorBlock' // (Opcional) Contenedor para mostrar mensajes de error
			});
			
		}
		
		
		
		// Funci√≥n para calcular la edad a partir de la fecha de nacimiento
		function calcularEdad(fechaNacimiento) {
		    var hoy = new Date();
		    var edad = hoy.getFullYear() - fechaNacimiento.getFullYear();
		    var mes = hoy.getMonth() - fechaNacimiento.getMonth();
		    if (mes < 0 || (mes === 0 && hoy.getDate() < fechaNacimiento.getDate())) {
		        edad--;
		    }
		    return edad;
		}

	    $('#formulario4 input[name="fechanacimiento"]').on('input', function() {
	        var fechaNacimiento = new Date($(this).val()); // Obtener fecha de nacimiento
	        var edad = calcularEdad(fechaNacimiento); // Calcular la edad
	        $('#formulario4  #edad').val(edad); // Mostrar la edad en un campo de texto
	    });

		
			
	    $('#formulario4 #departamento').on('change', function() {
	        var id = $(this).val();

	        $.ajax({
	            url: nameEntity4dt + '/provincias/' + id,
	            type: 'GET',
	            contentType: 'application/json',
	            success: function(data) {
	                var $provincia = $('#provincia');
	                $provincia.empty(); // Limpiar opciones anteriores

	                // Agregar opci√≥n por defecto
	                $provincia.append($('<option>', {
	                    value: '',
	                    text: 'Seleccionar'
	                }));

	                // Agregar nuevas opciones
	                $.each(data, function(index, item) {
	                    if (item.estado == 1) {
	                        $provincia.append($('<option>', {
	                            value: item.id,
	                            text: item.nombre
	                        }));
	                    }
	                });
	            },
	            error: function(xhr, status, error) {
	                console.error('Error al traer la lista:', error);
	            }
	        });
	    });
			
			var xhr = new XMLHttpRequest();//inicializando un objeto para realizar solicitudes HTTP asincronas
	  		xhr.open('GET', nameEntity1dt );//abre una solicitud GET y hacia la direccion establecida
	  		xhr.responseType = 'json';//el tipo de respuesta que espera desde el servidor
	  		xhr.onload = function() {//cuando se complete la solicitud de manera exitosa
	   		  if (xhr.status === 200) {//se verifica el estado de la respuesta
	   		    var data = xhr.response;//se asigna la respuesta
	   		    // Hacer algo con el resultado aquÔøΩ
// 	 		     console.log("GRADOS ACADEMICOS:",data);
		   		 data.forEach(function(item) {
		   		    if (item.estado == 1) {
		   		        var option = document.createElement('option');
		   		        option.value = item.id;
		   		        option.textContent = item.nombre;
//	 	   		        document.getElementById('gradoacademico').appendChild(option);
		                var select1 = document.querySelector('#formulario4 select[name="gradoacademico"]');
		                if (select1) {
		                    select1.appendChild(option);
		                }
		   		    }
		   		});
	   		  }
	   		};
	   		xhr.send();
			
			var xhr1 = new XMLHttpRequest();//inicializando un objeto para realizar solicitudes HTTP asincronas
	  		xhr1.open('GET', nameEntity2dt );//abre una solicitud GET y hacia la direccion establecida
	  		xhr1.responseType = 'json';//el tipo de respuesta que espera desde el servidor
	  		xhr1.onload = function() {//cuando se complete la solicitud de manera exitosa
	   		  if (xhr1.status === 200) {//se verifica el estado de la respuesta
	   		    var data = xhr1.response;//se asigna la respuesta
	   		    // Hacer algo con el resultado aquÔøΩ
// 	 		     console.log("PROFESIONES:",data);
		   		 data.forEach(function(item) {
		   		    if (item.estado == 1) {
		   		        var option = document.createElement('option');
		   		        option.value = item.id;
		   		        option.textContent = item.nombre;
//	 	   		        document.getElementById('profesion').appendChild(option);
		                var select2 = document.querySelector('#formulario4 select[name="profesion"]');
		                if (select2) {
		                    select2.appendChild(option);
		                }
		   		    }
		   		});
	   		  }
	   		};
	   		xhr1.send();
	   		
			var xhr3 = new XMLHttpRequest();//inicializando un objeto para realizar solicitudes HTTP asincronas
	  		xhr3.open('GET', nameEntity3dt );//abre una solicitud GET y hacia la direccion establecida
	  		xhr3.responseType = 'json';//el tipo de respuesta que espera desde el servidor
	  		xhr3.onload = function() {//cuando se complete la solicitud de manera exitosa
	   		  if (xhr3.status === 200) {//se verifica el estado de la respuesta
	   		    var data = xhr3.response;//se asigna la respuesta
	   		    // Hacer algo con el resultado aquÔøΩ
// 	 		     console.log("DEPARTAMENTOS:",data);
		   		 data.forEach(function(item) {
		   		    if (item.estado == 1) {
		   		        var option = document.createElement('option');
		   		        option.value = item.id;
		   		        option.textContent = item.nombre;
//	 	   		        document.getElementById('departamento').appendChild(option);
		                var select3 = document.querySelector('#formulario4 select[name="departamento"]');
		                if (select3) {
		                    select3.appendChild(option);
		                }
		   		    }
		   		});
	   		  }
	   		};
	   		xhr3.send();
			


		
		
		
		function mostrarevento(event, url) {
			event.preventDefault(); // Evita el comportamiento predeterminado del enlace
		  	window.open(url, '_blank'); // Abre la URL en una nueva pesta√±a
		}
		function mostrargrupowhat(event, url) {
		    event.preventDefault(); // Evita que el enlace se abra en la misma pesta√±a
	    	window.open(url, '_blank'); // Abre la URL en una nueva pesta√±a
		}
		
		
		$("#formulario4").submit(function (event) {
// 			document.activeElement.blur();
// 			$("#formulario4 input, #formulario4 select, #formulario4 textarea").blur();
			event.preventDefault();
			const swalWithBootstrapButtons = Swal.mixin({
	        	  customClass: {
	        	    confirmButton: 'btn btn-success',
	        	    cancelButton: 'btn btn-danger'
	        	  },
	        	  buttonsStyling: false
	        	})
	        

	        	
			swalWithBootstrapButtons.fire({
				  title: "¬øEstas Seguro de continuar?",   
	              text: "Se registrara su inscripci√≥n en el Sistema",   
				  icon: 'warning',
				  showCancelButton: true,
				  confirmButtonText: 'Si, Continuar!',
				  cancelButtonText: 'No, Cancelar!',
				  reverseButtons: true
				}).then((result) => {
//						console.log("GOPCION:",GOPCION)
				  if (result.isConfirmed) {
//		               	   if(GOPCION=="ADD"){
						saveEntityForm4()
//		            	   }else{
//		            		   updateEntityForm1()
//		            	   }
	               	
				  } else if (
				    result.dismiss === Swal.DismissReason.cancel
				  ) {
				    swalWithBootstrapButtons.fire({
				    	icon:'error',
				    	title:"Cancelado",
	                    text:"Se ha cancelado operacion",
	                    timer:700,
	                    showCancelButton:false,
	                 	showConfirmButton:false
				    })
				  }
				  $('.modal').modal('hide')  
				})
	        
				 
		 	 });
		
		async function saveEntityForm4() {
		    // Mostrar el modal de carga antes de la solicitud
		
		    $("#cargando").modal("show");

		    // Iniciar medici√≥n del tiempo
		    var start_time = new Date().getTime();

		    let formData = new FormData(document.getElementById('formulario4'));
// 		    let selectedOptions = Array.from($('#expositores option:selected'));

		    console.log("formData:", formData);

		    $.ajax({
		        url: nameEntity0dt + "/guardarcertificadoinscrito",
		        type: "POST",
		        contentType: false,
		        processData: false,
		        data: formData,
		        success: function (res) {
		            // Medir el tiempo de respuesta
		            var elapsed_time = Math.round((new Date().getTime() - start_time) / 1000);
		            console.log("Tiempo de carga del servidor:", elapsed_time, "segundos");

		            // Ocultar el modal de carga
		            $("#cargando").modal("hide");

		            console.log("Registrado:", res);
		            Swal.fire({
		                title: "Registrado",
		                text: "Se ha registrado exitosamente",
		                icon: "success",
		                timer: 500,
		                showConfirmButton: false
		            }).then(() => {
		                // Mostrar mensaje de registro y recargar despu√©s de unos segundos
// 		                document.getElementById("registrado").classList.add("mostrar");
		                $('#table').dataTable().fnDraw('page');
// 		                setTimeout(() => {
// 		                    location.reload();
// 		                }, 3000); // 7 segundos
		            });
		        },
		        error: function (err) {
		            console.log(err);

		            // Ocultar el modal de carga en caso de error
		            $("#cargando").modal("hide");

		            Swal.fire({
		                icon: 'error',
		                title: "Cancelado",
		                text: "No se realiz√≥ la operaci√≥n, comun√≠quese con el administrador del sistema. Gracias",
		                timer: 500,
		                showCancelButton: false,
		                showConfirmButton: false
		            });
		        }
		    });
		}
		
		
		$("#formulario4 .btn-mas-detalles").click(function (e) {
//		    	alert('mostrando evento')
// 			e.preventDefault();
				$(".contenido-detalles-evento").toggle(100); // 300ms de animaci√≥n
		});
		// Evitar que el campo CI reciba el foco autom√°ticamente
		window.addEventListener('focus', function () {
		    if (document.activeElement === $('input[name="ci"]')[0]) {
		        $('input[name="ci"]').blur(); // Forzar que pierda el foco
		    }
		});


	    //resetear los datos de validacion
	  	document.getElementById("ok").classList.add("ocultar");
	    document.getElementById("error").classList.add("ocultar");
	    document.getElementById("error-inscrito").classList.add("ocultar");
			document.getElementById("ok").classList.remove("mostrar");
	    document.getElementById("error").classList.remove("mostrar");
	    document.getElementById("error-inscrito").classList.remove("mostrar");

//	     document.getElementById("registrado").classList.add("mostrar");
	    document.getElementById("registrado").classList.add("ocultar");
	    
//			$('#formulario4').find('input[name="ci"]').on('blur mouseout mouseover',function(){
// 		$('#formulario4').find('input[name="ci"]').on('blur focus',function(){
		$('#formulario4').find('input[name="ci"]').on('blur',function(){
				let ci_val=$(this).val()
				console.log('ci_val:',ci_val)

				if (ci_val!="") {
				//si no esta vacio los datos del carnet iremos a buscar los datos del estudiante.
		 		validarParticipante(ci_val);
			}else{
				console.log("ci_val:",ci_val)
// 				console.log("GID_EVENTOdt:",GID_EVENTOdt)
			}

		})
			

			
	function validarParticipante(value) {
        function asyncSqrt(value,callback){
            // alert('1')
            $.ajax({
                url:nameEntityPdt+"/findParticipante/",
                data:{
                    ci:value,
                },
                dataType:"json",
                success:function(resp)
                {
                    callback(resp)
                },  
                error:function(err){
                    alert('sin respuesta del servidor')
                }

            })
        }
	        
	        asyncSqrt(value,function(result){
	            console.log('resultValidarParticipante: ',result)

	                if(result.persona==null){
	    	   			// Si no se encontraron datos del carnet ingresado
	    		        document.getElementById("error").classList.remove("mostrar");
	    		        document.getElementById("error-inscrito").classList.remove("mostrar");
	    		        document.getElementById("ok").classList.remove("ocultar");
	    		        
	    		        document.getElementById("error-inscrito").classList.add("ocultar");
	    		        document.getElementById("error").classList.add("ocultar");
	    		        logouserdefault()//formateamos la imagen del participante
	    		        resetdataformulario4();
	                }else{

	                	resetdataformulario4();
	                	document.getElementById("ok").classList.add("ocultar");
	                	document.getElementById("error-inscrito").classList.add("ocultar");
	                	
	    		        document.getElementById("error").classList.add("mostrar");	
	                	if(result.participante!=null){
	                		//aqui ponemos los datos del estudiante si se registro como participante
	                		console.log("persona2:",result.persona)
	                		console.log("participante2:",result.participante)
	                		let persona=result.persona
	                		let participante=result.participante
	                		
	                		if (participante.imagen!=null) {
		                		//********aqui cargamos la imagen del participante, si en caso tiene registrado
		                		$('#formulario4').find('input[name="archivoimgparticipante"]').val('')
			    				$('#formulario4').find('input[name="archivoimgparticipante"]').fileinput('destroy');
		                		
		                		var xhr1 = new XMLHttpRequest();
			          			let nombrelogodefecto = participante.imagen; // Nombre del archivo que deseas cargar
			//           			console.log("nombrelogodefecto:", nombrelogodefecto);
			          			xhr1.open("GET", nameEntityPdt + "/logourl/" + nombrelogodefecto, true);
			          			xhr1.responseType = 'blob'; // Cambia el tipo de respuesta a blob
		                		
			    			    xhr1.onload = function() {
			    			        var blob = xhr1.response;
			    			        var file = new File([blob], nombrelogodefecto);
			    			        var inputFile = document.getElementById('archivoimgparticipante');
			    			        var fileList = new DataTransfer();
			    			        fileList.items.add(file);
			    			        inputFile.files = fileList.files;
			    			        inputFile.title = nombrelogodefecto;
			    			    };
			    			    xhr1.send();
			    				$('#formulario4').find('input[name="archivoimgparticipante"]').fileinput({
			    				  	language:'es',
			    				    showUpload: false, // Ocultar el bot√É¬≥n de carga
			    				    showRemove: true, 
			                        showCaption: true,
			                        showCancel: true,
			                        allowedFileExtensions: ['jpg', 'jpeg', 'png', 'gif'], // Solo permitir im√°genes
			                        elErrorContainer: '#errorBlock', // (Opcional) Contenedor para mostrar mensajes de error
//			    		 		  	 ,maxImageWidth: 300 // Ancho m√Ø¬ø¬Ωximo de la imagen previa en p√Ø¬ø¬Ωxeles
//			    		 		     ,maxImageHeight: 300 
			   				     	initialPreview: [
						                `<img src="${nameEntityPdt}/logourl/${nombrelogodefecto}" class="file-preview-image" alt="Vista previa" title="${nombrelogodefecto}">`
						            ],
						            initialPreviewConfig: [
						                {
						                    caption: nombrelogodefecto, // Texto que aparecer√° debajo de la imagen en la vista previa
						                    width: '200px', // Ancho de la imagen en la vista previa
						                    url: '/', // URL opcional para el enlace de eliminaci√≥n (en este caso, se establece como '#')
						                    key: 1 // Clave √∫nica para el elemento de vista previa
						                }
						            ],
						            fileActionSettings: {
						                removeIcon: '', // Vaciar el icono del bot√≥n de eliminar
						                removeClass: 'hide-remove', // Aplicar una clase para ocultar el bot√≥n de eliminar
						                removeTitle: '', // Vaciar el t√≠tulo del bot√≥n de eliminar
						            },
						            initialCaption: nombrelogodefecto // Para poner el nombre en la caja del file

			    				});
			          			//*********************fin de agregar logo
							}else{
								logouserdefault()
							}
	                		

		          			
	                		$('#formulario4').find('input[name="idper"]').val(persona.id);
	                		$('#formulario4').find('input[name="idpart"]').val(participante.id);
	                		$('#formulario4').find('input[name="ci"]').val(persona.ci);
	             			document.querySelectorAll("#exp > option").forEach(function(option) {
	               			    if (option.value == persona.exp) {
	               			        option.selected = true;
	               			    }
	               			});
	              			$('#formulario4').find('input[name="nombres"]').val(persona.nombres);
	              			$('#formulario4').find('input[name="apellidos"]').val(persona.apellidos);
	             			
	              			if(persona.genero!=null){
	                  			document.querySelectorAll("#genero > option").forEach(function(option) {
	                   			    if (option.value == persona.genero) {
	                   			        option.selected = true;
	                   			    }
	                   			});
	             			}
	              			if(persona.fechanacimiento!=null){
	              				$('#formulario4').find('input[name="fechanacimiento"]').val(persona.fechanacimiento);
	              			}
	              			if(persona.edad!=null){
	              				$('#formulario4').find('input[name="edad"]').val(persona.edad);
	              			}
	              			$('#formulario4').find('input[name="celular"]').val(persona.celular);
	              			//grado academico
							// Grado Acad√©mico
							if (participante.gradoacademico != null) {
							    const selectGrado = document.querySelector("#formulario4 select[name='gradoacademico']");
							    selectGrado.querySelectorAll("option").forEach(function(option) {
							        if (option.value == participante.gradoacademico.id) {
							            option.selected = true;
							        }
							    });
							}
							
							// Profesi√≥n
							if (participante.profesion != null) {
							    const selectProfesion = document.querySelector("#formulario4 select[name='profesion']");
							    selectProfesion.querySelectorAll("option").forEach(function(option) {
							        if (option.value == participante.profesion.id) {
							            option.selected = true;
							        }
							    });
							}

	              			
	              			$('#formulario4').find('input[name="email"]').val(persona.email);
	              			//ciudad
							if (participante.departamento != null) {
							    const selectDepartamento = document.querySelector("#formulario4 select[name='departamento']");
							    selectDepartamento.querySelectorAll("option").forEach(function(option) {
							        if (option.value == participante.departamento.id) {
							            option.selected = true;
							        }
							    });
							}
	              			
	              			
	              			
	              			if (participante.provincia != null) {
	              			    var provinciaSeleccionada = participante.provincia.id;
	              			    $.get(nameEntity4dt + '/provincias/' + participante.departamento.id, function(provincias) {
	              			        let $provincia = $("#formulario4 #provincia");
	              			        $provincia.empty().append('<option value="">Seleccione una provincia</option>');
	              			        provincias.forEach(function(provincia) {
	              			            let selected = provincia.id === provinciaSeleccionada ? 'selected' : '';
	              			            $provincia.append(`<option value="${provincia.id}" ${selected}>${provincia.nombre}</option>`);
	              			        });
	              			    });
	              			} else {
	              			    $("#formulario4 #provincia").empty().append('<option value="">Seleccionar</option>');
	              			}
	              			
//	              	 		if(participante.localidad!=null){
//	              	 			$('#formulario4').find('input[name="localidad"]').val(participante.localidad);
//	              	 		}
//	              	 		$('#formulario4').find('textarea[name="direccion"]').val(persona.direccion);
	              			
	       
	              			//tipo de certificado el que esta marcado
	                		
	                	}else{
	                		//si solo tenemos datos de la persona, mostramos sus datos personales
	                		console.log('persona:',result.persona)
	                		let persona=result.persona
	                		console.log('participante:',result.participante)
	                		logouserdefault()
	                		
//	                 		$('#formulario4').find('input[name="id"]').val(persona.id);
	              			$('#formulario4').find('input[name="idper"]').val(persona.id);
	              			$('#formulario4').find('input[name="ci"]').val(persona.ci);
	             			document.querySelectorAll("#exp > option").forEach(function(option) {
	               			    if (option.value == persona.exp) {
	               			        option.selected = true;
	               			    }
	               			});
	              			$('#formulario4').find('input[name="nombres"]').val(persona.nombres);
	              			$('#formulario4').find('input[name="apellidos"]').val(persona.apellidos);
	             			
	              			if(persona.genero!=null){
	                  			document.querySelectorAll("#genero > option").forEach(function(option) {
	                   			    if (option.value == persona.genero) {
	                   			        option.selected = true;
	                   			    }
	                   			});
	             			}
	              			if(persona.fechanacimiento!=null){
	              				$('#formulario4').find('input[name="fechanacimiento"]').val(persona.fechanacimiento);
	              			}
	              			if(persona.edad!=null){
	              				$('#formulario4').find('input[name="edad"]').val(persona.edad);
	              			}
	              			$('#formulario4').find('input[name="celular"]').val(persona.celular);
	              			$('#formulario4').find('input[name="email"]').val(persona.email);
	              			$('#formulario4').find('textarea[name="direccion"]').val(persona.direccion);
	              			
	              			
	                	}
	                }
				
	            

	            
	        })
			}
	</script>
	
</body>
</html>